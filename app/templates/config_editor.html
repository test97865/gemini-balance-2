{% extends "base.html" %} {% block title %}閰嶇疆缂栬緫鍣?- Gemini Balance{%
endblock %} {% block head_extra_styles %}
<style>
  /* config_editor.html specific styles */
  /* Animations (already in base.html, but keep fade-in class usage) */
  .fade-in {
    animation: fadeIn 0.3s ease forwards;
  }
  /* Modal specific styles (already in base.html) */
  .array-container {
    max-height: 300px;
    overflow-y: auto;
    padding: 1rem; /* p-4 consistency */
    margin-bottom: 0.5rem; /* mb-2 consistency */
    background-color: rgba(255, 255, 255, 0.95) !important; /* light theme */
    border: 1px solid rgba(0, 0, 0, 0.12) !important; /* light gray border */
    color: #374151 !important; /* gray-700 for light theme */
    border-radius: 0.5rem; /* rounded-lg consistency */
  }
  #API_KEYS_container {
    /* Keep specific ID styling if needed */
    max-height: 300px;
    overflow-y: auto;
  }
  .config-section {
    display: none;
    /* theming: new background and border for sections */
    background-color: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    border: 1px solid rgba(0, 0, 0, 0.08);
    border-radius: 0.75rem; /* rounded-xl */
    padding: 1.5rem; /* p-6 */
    margin-bottom: 1.5rem; /* mb-6 */
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-lg */
  }
  .config-section.active {
    display: block;
    animation: fadeIn 0.3s ease forwards; /* Use base animation */
  }
  .provider-config {
    display: none;
  }
  .provider-config.active {
    display: block;
  }
  /* Tailwind Toggle Switch Helper CSS */
  .toggle-checkbox:checked {
    @apply: right-0 border-blue-600; /* theming: changed to blue for light theme */
    right: 0;
    border-color: #2563eb; /* theming: blue-600 */
  }
  .toggle-checkbox:checked + .toggle-label {
    @apply: bg-blue-600; /* theming: changed to blue for light theme */
    background-color: #2563eb; /* theming: blue-600 */
  }
  .toggle-label {
    /* theming: style for unchecked state */
    background-color: rgba(156, 163, 175, 0.3); /* gray-400 */
  }
  /* 缁熶竴閫氱煡鏍峰紡涓洪粦鑹插崐閫忔槑锛岀‘淇濅笌 keys_status 涓€鑷?*/
  .notification {
    background: rgba(0, 0, 0, 0.8) !important;
    color: #fff !important;
  }

  /* Theming for input fields - 淇杈规閲嶅奖闂 */
  .form-input-themed {
    background-color: rgba(255, 255, 255, 0.95) !important;
    border: 1px solid rgba(0, 0, 0, 0.12) !important; /* 涓虹嫭绔嬭緭鍏ユ鎻愪緵杈规 */
    color: #374151 !important; /* gray-700 */
    outline: none !important; /* 绉婚櫎榛樿outline */
    box-shadow: none !important; /* 绉婚櫎榛樿box-shadow */
    transition: border-color 0.15s ease-in-out !important;
  }
  .form-input-themed::placeholder {
    color: #9ca3af !important; /* gray-400 */
  }
  .form-input-themed:focus {
    border-color: #3b82f6 !important; /* focus鏃舵敼鍙樿竟妗嗛鑹?*/
    box-shadow: none !important; /* 绉婚櫎focus闃村奖锛屽彧淇濈暀杈规鍙樺寲 */
    outline: none !important; /* 纭繚娌℃湁outline */
  }

  /* 瀵逛簬鍦ㄦ暟缁勫鍣ㄥ唴鐨勮緭鍏ユ锛岀Щ闄よ竟妗?*/
  .array-container .form-input-themed {
    border: none !important; /* 鍦ㄦ暟缁勫鍣ㄥ唴鐨勮緭鍏ユ绉婚櫎杈规 */
  }

  .array-container .form-input-themed:focus {
    border: none !important; /* 纭繚focus鏃朵篃娌℃湁杈规 */
  }

  /* 涓虹嫭绔嬬殑妯″瀷閫夋嫨杈撳叆妗嗕繚鐣欒竟妗?*/
  .flex.items-center .form-input-themed {
    border: 1px solid rgba(0, 0, 0, 0.12) !important; /* 淇濈暀杈规 */
  }

  .flex.items-center .form-input-themed:focus {
    border-color: #3b82f6 !important; /* focus鏃舵敼鍙樿竟妗嗛鑹?*/
  }

  /* Theming for select fields - 鏀硅繘涓嬫媺妗嗘牱寮?*/
  .form-select-themed {
    background-color: rgba(255, 255, 255, 0.95) !important; /* 鐧借壊鑳屾櫙 */
    border: 1px solid rgba(0, 0, 0, 0.12) !important; /* 鐏拌壊杈规 */
    color: #374151 !important; /* gray-700 鏂囧瓧棰滆壊 */
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e") !important; /* 鐏拌壊绠ご */
    appearance: none !important;
    padding: 0.6rem 2.5rem 0.6rem 0.8rem !important; /* 璋冩暣鍐呰竟璺?*/
    background-repeat: no-repeat !important;
    background-position: right 0.6rem center !important;
    background-size: 1.5em 1.5em !important;
    border-radius: 0.5rem !important; /* 鍦嗚 */
    font-weight: 500 !important; /* 鍗婄矖浣?*/
    height: auto !important; /* 鑷姩楂樺害 */
    box-shadow: none !important; /* 绉婚櫎闃村奖 */
    cursor: pointer !important;
  }

  .form-select-themed:focus {
    border-color: #3b82f6 !important; /* blue-500 */
    box-shadow: none !important; /* 绉婚櫎focus闃村奖 */
    outline: none !important;
  }

  .form-select-themed option {
    background-color: rgba(
      255,
      255,
      255,
      0.98
    ) !important; /* white background */
    color: #374151 !important; /* gray-700 */
    padding: 8px !important;
  }

  /* 鏃ュ織绾у埆鏍峰紡 - 娴呰壊涓婚缁熶竴璁捐 */
  #LOG_LEVEL {
    font-weight: 600 !important;
  }

  /* 缁熶竴鐨勬棩蹇楃骇鍒€夐」鏍峰紡 - 浣跨敤娴呰壊涓婚 */
  #LOG_LEVEL option[value="DEBUG"] {
    background-color: rgba(255, 255, 255, 0.98) !important; /* 鐧借壊鑳屾櫙 */
    color: #374151 !important; /* gray-700 娣辩伆鑹叉枃瀛?*/
  }

  #LOG_LEVEL option[value="INFO"] {
    background-color: rgba(
      249,
      250,
      251,
      0.98
    ) !important; /* gray-50 娴呯伆鑳屾櫙 */
    color: #374151 !important; /* gray-700 娣辩伆鑹叉枃瀛?*/
  }

  #LOG_LEVEL option[value="WARNING"] {
    background-color: rgba(
      243,
      244,
      246,
      0.98
    ) !important; /* gray-100 绋嶆繁鐏拌儗鏅?*/
    color: #374151 !important; /* gray-700 娣辩伆鑹叉枃瀛?*/
  }

  #LOG_LEVEL option[value="ERROR"] {
    background-color: rgba(
      229,
      231,
      235,
      0.98
    ) !important; /* gray-200 涓伆鑳屾櫙 */
    color: #374151 !important; /* gray-700 娣辩伆鑹叉枃瀛?*/
  }

  #LOG_LEVEL option[value="CRITICAL"] {
    background-color: rgba(
      209,
      213,
      219,
      0.98
    ) !important; /* gray-300 娣辩伆鑳屾櫙 */
    color: #374151 !important; /* gray-700 娣辩伆鑹叉枃瀛?*/
  }

  /* 鎬濊€冩ā鍨嬮绠楁槧灏勬牱寮?*/
  .map-item {
    background-color: rgba(60, 40, 130, 0.2) !important;
    border-radius: 0.5rem !important;
    padding: 0.5rem !important;
    border: 1px solid rgba(167, 139, 250, 0.3) !important;
    transition: all 0.2s ease-in-out !important;
  }

  .map-item:hover {
    background-color: rgba(60, 40, 130, 0.3) !important;
    border-color: rgba(167, 139, 250, 0.5) !important;
  }

  .map-key-input {
    background-color: rgba(255, 255, 255, 0.95) !important;
    border: 1px solid rgba(0, 0, 0, 0.12) !important;
    color: #374151 !important; /* gray-700 */
    font-weight: 500 !important;
    border-radius: 0.375rem !important;
  }

  .map-value-input {
    background-color: rgba(255, 255, 255, 0.95) !important;
    border: 1px solid rgba(0, 0, 0, 0.12) !important;
    color: #374151 !important; /* gray-700 */
    font-weight: 600 !important;
    border-radius: 0.375rem !important;
    box-shadow: none !important;
    transition: all 0.2s !important;
  }

  .map-value-input:focus {
    background-color: rgba(255, 255, 255, 1) !important;
    border-color: #3b82f6 !important; /* blue-500 */
    box-shadow: none !important; /* 绉婚櫎focus闃村奖 */
    outline: none !important;
  }

  /* 璀﹀憡鏂囧瓧鏍峰紡 */
  .warning-text {
    color: #f87171 !important; /* red-400 */
    font-weight: 600 !important;
    background-color: rgba(248, 113, 113, 0.15) !important;
    padding: 0.5rem 0.75rem !important;
    border-radius: 0.375rem !important;
    border-left: 3px solid #ef4444 !important; /* red-500 */
    display: flex !important;
    align-items: center !important;
    margin-top: 0.5rem !important;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) !important;
  }

  .warning-text i {
    margin-right: 0.5rem !important;
    color: #ef4444 !important; /* red-500 */
  }

  /* 浠ょ墝鐢熸垚鎸夐挳鏍峰紡 */
  .generate-btn {
    background-color: rgba(59, 130, 246, 0.1) !important; /* blue-500 light */
    color: #3b82f6 !important; /* blue-500 */
    border: 1px solid rgba(59, 130, 246, 0.3) !important;
    border-left: none !important;
    transition: all 0.2s ease !important;
  }

  .generate-btn:hover {
    background-color: rgba(
      59,
      130,
      246,
      0.2
    ) !important; /* blue-500 more opaque */
    color: #1d4ed8 !important; /* blue-700 */
    box-shadow: 0 0 8px rgba(59, 130, 246, 0.3) !important;
  }

  .generate-btn:focus {
    outline: none !important;
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5) !important;
  }

  /* 瀵艰埅閾炬帴鎮仠鏍峰紡 - 浼樺寲浠ラ伩鍏嶉伄鎸″唴瀹?*/
  .nav-link {
    transition: all 0.2s ease-in-out;
    position: relative;
    z-index: 1; /* 纭繚涓嶄細閬尅閲嶈鍐呭 */
  }

  .nav-link:hover {
    background-color: rgba(59, 130, 246, 0.1) !important; /* blue-500 light */
    transform: scale(1.02); /* 浣跨敤缂╂斁浠ｆ浛鍚戜笂绉诲姩 */
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); /* 澧炲己闃村奖鏁堟灉 */
  }

  /* 瀵艰埅鎸夐挳瀹瑰櫒鏍峰紡 - 涓烘偓鍋滄晥鏋滈鐣欑┖闂?*/
  .nav-buttons-container {
    padding-top: 0.5rem; /* 涓烘偓鍋滄晥鏋滈鐣欎笂鏂圭┖闂?*/
    padding-bottom: 0.75rem; /* 涓烘偓鍋滄晥鏋滈鐣欎笅鏂圭┖闂?*/
  }

  /* 涓诲鑸寜閽殑浼樺寲鎮仠鏁堟灉 */
  .main-nav-btn:hover {
    transform: scale(1.02) !important; /* 浣跨敤缂╂斁浠ｆ浛鍚戜笂绉诲姩 */
    box-shadow: 0 8px 16px rgba(59, 130, 246, 0.3) !important; /* 钃濊壊闃村奖 */
  }

  /* 鎿嶄綔鎸夐挳鐨勪紭鍖栨偓鍋滄晥鏋?*/
  .action-btn {
    position: relative;
    z-index: 1;
  }

  .action-btn:hover {
    transform: scale(1.02) !important; /* 浣跨敤缂╂斁浠ｆ浛鍚戜笂绉诲姩 */
  }

  .action-btn:hover#saveBtn {
    box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4) !important; /* 钃濊壊闃村奖 */
  }

  .action-btn:hover#resetBtn {
    box-shadow: 0 8px 20px rgba(107, 114, 128, 0.4) !important; /* 鐏拌壊闃村奖 */
  }

  /* 鍒锋柊鎸夐挳鏍峰紡 - 涓庣洃鎺ч潰鏉块〉闈繚鎸佷竴鑷?*/
  .bg-white.bg-opacity-20 {
    background-color: rgba(255, 255, 255, 0.9) !important;
    color: #3b82f6 !important; /* blue-500 - 涓庣洃鎺ч潰鏉夸竴鑷?*/
  }

  .bg-white.bg-opacity-20:hover {
    background-color: rgba(255, 255, 255, 1) !important;
    color: #2563eb !important; /* blue-600 - 鎮仠鏃剁◢娣?*/
  }

  /* General label and small text theming for light theme */
  label {
    color: #374151 !important; /* Dark gray for labels in light theme */
    font-weight: 600; /* semibold */
  }
  small {
    color: #6b7280 !important; /* Medium gray for small text */
  }

  /* Override all violet/purple buttons to light blue */
  .bg-violet-600,
  button.bg-violet-600 {
    background-color: #3b82f6 !important; /* blue-500 - light blue */
  }

  .bg-violet-600:hover,
  button.bg-violet-600:hover,
  .hover\\:bg-violet-700:hover {
    background-color: #2563eb !important; /* blue-600 - darker light blue */
  }

  /* Override blue buttons to light blue */
  .bg-blue-600,
  button.bg-blue-600 {
    background-color: #3b82f6 !important; /* blue-500 - light blue */
  }

  .bg-blue-600:hover,
  button.bg-blue-600:hover,
  .hover\\:bg-blue-700:hover {
    background-color: #2563eb !important; /* blue-600 - darker light blue */
  }

  /* Override red buttons to bright light red */
  .bg-red-600,
  button.bg-red-600,
  .bg-red-700,
  button.bg-red-700,
  .bg-red-800,
  button.bg-red-800 {
    background-color: #f87171 !important; /* red-400 - bright light red */
  }

  .bg-red-600:hover,
  button.bg-red-600:hover,
  .bg-red-700:hover,
  button.bg-red-700:hover,
  .bg-red-800:hover,
  button.bg-red-800:hover,
  .hover\\:bg-red-700:hover,
  .hover\\:bg-red-800:hover {
    background-color: #ef4444 !important; /* red-500 - darker bright light red */
  }

  /* Update section headings */
  .config-section h2 {
    color: #1f2937 !important; /* gray-800 */
    border-color: #d1d5db !important; /* gray-300 */
  }

  .config-section h2 i {
    color: #3b82f6 !important; /* blue-500 */
  }

  /* Update tab button active state - 澧炲己閫変腑鎬佹牱寮忥紝鎻愰珮浼樺厛绾?*/
  button.tab-btn.active {
    background-color: #3b82f6 !important; /* blue-500 */
    color: #ffffff !important; /* 纭繚鐧借壊鏂囧瓧 */
    box-shadow: 0 4px 12px -2px rgba(59, 130, 246, 0.4),
      0 2px 6px -1px rgba(59, 130, 246, 0.2) !important; /* 钃濊壊闃村奖 */
    transform: translateY(-2px) !important; /* 鏇存槑鏄剧殑涓婄Щ鏁堟灉 */
    border: 2px solid #2563eb !important; /* blue-600 杈规 */
    font-weight: 600 !important; /* 鍔犵矖瀛椾綋 */
  }

  /* Ensure inactive tabs have proper styling - 澧炲己鏈€変腑鎬佹牱寮忥紝鎻愰珮浼樺厛绾?*/
  button.tab-btn:not(.active) {
    background-color: #f8fafc !important; /* slate-50 鏇存祬鐨勮儗鏅?*/
    color: #64748b !important; /* slate-500 鏇存槑鏄剧殑鐏拌壊鏂囧瓧 */
    border: 2px solid #e2e8f0 !important; /* slate-200 杈规 */
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important; /* 杞诲井闃村奖 */
    font-weight: 500 !important; /* 涓瓑瀛椾綋绮楃粏 */
  }

  button.tab-btn:not(.active):hover {
    background-color: #f1f5f9 !important; /* slate-100 */
    color: #475569 !important; /* slate-600 鏇存繁鐨勬枃瀛楅鑹?*/
    transform: translateY(-1px) !important;
    border-color: #cbd5e1 !important; /* slate-300 */
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
  }

  /* Add transition for smooth state changes - 鎻愰珮浼樺厛绾?*/
  button.tab-btn {
    transition: all 0.2s ease-in-out !important;
    cursor: pointer !important;
    /* 纭繚鍩虹鏍峰紡涓嶈Tailwind瑕嗙洊 */
    padding: 0.5rem 1.25rem !important; /* px-5 py-2 */
    border-radius: 9999px !important; /* rounded-full */
    font-size: 0.875rem !important; /* text-sm */
    font-weight: 500 !important; /* font-medium */
  }

  /* 棰濆鐨勯珮浼樺厛绾ц鍒欑‘淇濇牱寮忕敓鏁?*/
  .flex.justify-center.mb-6.flex-wrap.gap-2 button.tab-btn.active {
    background-color: #3b82f6 !important;
    color: #ffffff !important;
    border: 2px solid #2563eb !important;
    box-shadow: 0 4px 12px -2px rgba(59, 130, 246, 0.4),
      0 2px 6px -1px rgba(59, 130, 246, 0.2) !important;
    transform: translateY(-2px) !important;
    font-weight: 600 !important;
  }

  .flex.justify-center.mb-6.flex-wrap.gap-2 button.tab-btn:not(.active) {
    background-color: #f8fafc !important;
    color: #64748b !important;
    border: 2px solid #e2e8f0 !important;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
    font-weight: 500 !important;
    transform: none !important;
  }

  /* Fix all modal backgrounds - comprehensive override */
  .modal .w-full[style*="background-color: rgba(70, 50, 150"],
  .modal .w-full.max-w-lg[style*="background-color: rgba(70, 50, 150"],
  .modal .w-full.max-w-md[style*="background-color: rgba(70, 50, 150"] {
    background-color: rgba(255, 255, 255, 0.98) !important;
    color: #374151 !important; /* gray-700 */
    border-color: rgba(0, 0, 0, 0.08) !important;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
      0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
  }

  /* Fix modal titles */
  .modal h2.text-gray-800 {
    color: #1f2937 !important; /* gray-800 */
    font-weight: 600 !important;
  }

  /* Fix modal close buttons */
  .modal .text-gray-300 {
    color: #6b7280 !important; /* gray-500 */
  }

  .modal .text-gray-300:hover {
    color: #374151 !important; /* gray-700 */
  }

  /* Fix modal body text */
  .modal p,
  .modal label,
  .modal span {
    color: #374151 !important; /* gray-700 */
  }

  /* Fix modal textarea and input styling */
  .modal textarea,
  .modal input {
    background-color: rgba(255, 255, 255, 0.95) !important;
    color: #374151 !important; /* gray-700 */
    border: 1px solid rgba(0, 0, 0, 0.12) !important;
  }

  .modal textarea:focus,
  .modal input:focus {
    border-color: #3b82f6 !important; /* blue-500 */
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
  }

  /* Fix modal button styling */
  .modal .bg-violet-600,
  .modal button.bg-violet-600 {
    background-color: #3b82f6 !important; /* blue-500 - light blue */
    color: #ffffff !important;
    border: 1px solid #2563eb !important; /* blue-600 */
  }

  .modal .bg-violet-600:hover,
  .modal button.bg-violet-600:hover {
    background-color: #2563eb !important; /* blue-600 - darker light blue */
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important;
  }

  /* Fix modal blue button styling */
  .modal .bg-blue-500,
  .modal button.bg-blue-500,
  .modal .bg-blue-600,
  .modal button.bg-blue-600,
  .modal .bg-blue-700,
  .modal button.bg-blue-700 {
    background-color: #3b82f6 !important; /* blue-500 - light blue */
    color: #ffffff !important;
    border: 1px solid #2563eb !important; /* blue-600 */
  }

  .modal .bg-blue-500:hover,
  .modal button.bg-blue-500:hover,
  .modal .bg-blue-600:hover,
  .modal button.bg-blue-600:hover,
  .modal .bg-blue-700:hover,
  .modal button.bg-blue-700:hover {
    background-color: #2563eb !important; /* blue-600 - darker light blue */
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important;
  }

  /* Fix modal cancel/secondary buttons */
  .modal .bg-gray-500,
  .modal button.bg-gray-500,
  .modal .bg-gray-600,
  .modal button.bg-gray-600 {
    background-color: #e5e7eb !important; /* gray-200 - light gray */
    color: #374151 !important; /* gray-700 - dark text for contrast */
    border: 1px solid #d1d5db !important; /* gray-300 */
  }

  .modal .bg-gray-500:hover,
  .modal button.bg-gray-500:hover,
  .modal .bg-gray-600:hover,
  .modal button.bg-gray-600:hover {
    background-color: #d1d5db !important; /* gray-300 - darker light gray */
    color: #374151 !important; /* gray-700 - dark text for contrast */
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important;
  }

  /* Fix modal red/danger buttons */
  .modal .bg-red-500,
  .modal button.bg-red-500,
  .modal .bg-red-600,
  .modal button.bg-red-600,
  .modal .bg-red-700,
  .modal button.bg-red-700 {
    background-color: #f87171 !important; /* red-400 - bright light red */
    color: #ffffff !important;
    border: 1px solid #ef4444 !important; /* red-500 */
  }

  .modal .bg-red-500:hover,
  .modal button.bg-red-500:hover,
  .modal .bg-red-600:hover,
  .modal button.bg-red-600:hover,
  .modal .bg-red-700:hover,
  .modal button.bg-red-700:hover {
    background-color: #ef4444 !important; /* red-500 - darker bright light red */
    transform: translateY(-1px) !important;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important;
  }

  /* Fix all container backgrounds with purple */
  [style*="background-color: rgba(255, 255, 255, 0.05)"],
  [style*="background-color: rgba(80, 60, 160"],
  [style*="background-color: rgba(70, 50, 150"],
  [style*="background-color: rgba(60, 40, 130"],
  [style*="background-color: rgba(120, 100, 200"] {
    background-color: rgba(255, 255, 255, 0.95) !important;
    border-color: rgba(0, 0, 0, 0.08) !important;
    color: #374151 !important;
  }

  /* Fix map item styling */
  .map-item {
    background-color: rgba(249, 250, 251, 0.8) !important; /* gray-50 */
    border: 1px solid rgba(0, 0, 0, 0.08) !important;
    color: #374151 !important;
  }

  .map-item:hover {
    background-color: rgba(243, 244, 246, 1) !important; /* gray-100 */
    border-color: rgba(0, 0, 0, 0.12) !important;
  }

  /* Update model helper buttons */
  .model-helper-trigger-btn {
    color: #3b82f6 !important; /* blue-500 */
    background-color: rgba(59, 130, 246, 0.1) !important;
  }

  .model-helper-trigger-btn:hover {
    background-color: rgba(59, 130, 246, 0.2) !important;
    color: #1d4ed8 !important; /* blue-700 */
  }

  /* Comprehensive button text color fixes */
  .bg-blue-500,
  .bg-blue-600,
  .bg-blue-700,
  .bg-red-500,
  .bg-red-600,
  .bg-red-700,
  .bg-red-800,
  .bg-green-500,
  .bg-green-600,
  .bg-green-700,
  .bg-sky-500,
  .bg-sky-600,
  .bg-sky-700,
  .bg-purple-500,
  .bg-purple-600,
  .bg-purple-700,
  .bg-violet-500,
  .bg-violet-600,
  .bg-violet-700 {
    color: #ffffff !important;
  }

  /* Ensure button children inherit white text */
  .bg-blue-500 *,
  .bg-blue-600 *,
  .bg-blue-700 *,
  .bg-red-500 *,
  .bg-red-600 *,
  .bg-red-700 *,
  .bg-red-800 *,
  .bg-green-500 *,
  .bg-green-600 *,
  .bg-green-700 *,
  .bg-sky-500 *,
  .bg-sky-600 *,
  .bg-sky-700 *,
  .bg-purple-500 *,
  .bg-purple-600 *,
  .bg-purple-700 *,
  .bg-violet-500 *,
  .bg-violet-600 *,
  .bg-violet-700 * {
    color: inherit !important;
  }

  /* Fix page title gradient - comprehensive override */
  h1.text-transparent,
  .text-transparent.bg-clip-text,
  .bg-gradient-to-r.from-violet-400.to-pink-400 {
    background: none !important;
    color: #1f2937 !important; /* gray-800 - consistent with other pages */
    -webkit-background-clip: unset !important;
    background-clip: unset !important;
    text-shadow: none !important;
    font-weight: 800 !important; /* font-extrabold */
  }

  /* Fix all gradient buttons to use solid blue */
  .bg-gradient-to-r.from-violet-500.to-pink-500,
  .bg-gradient-to-r.from-gray-600.to-gray-700 {
    background: none !important;
  }

  /* Ensure all violet/purple colors are converted to blue theme */
  .text-violet-300,
  .text-violet-400,
  .text-violet-100 {
    color: #3b82f6 !important; /* blue-500 */
  }

  .border-violet-300,
  .border-violet-400 {
    border-color: rgba(
      59,
      130,
      246,
      0.3
    ) !important; /* blue-500 with opacity */
  }

  .hover\\:text-violet-400:hover,
  .hover\\:text-violet-100:hover {
    color: #2563eb !important; /* blue-600 */
  }

  .hover\\:bg-violet-700:hover {
    background-color: #2563eb !important; /* blue-600 */
  }

  /* Fix focus states for form elements */
  .focus-within\\:border-violet-400:focus-within,
  .focus-within\\:ring-violet-400:focus-within {
    border-color: #3b82f6 !important; /* blue-500 */
    box-shadow: none !important; /* 绉婚櫎focus闃村奖 */
  }

  /* Fix focus-within border color for auth token wrapper */
  .focus-within\\:border-blue-500:focus-within {
    border-color: #3b82f6 !important; /* blue-500 */
  }

  /* More specific selector for auth token wrapper */
  div.flex.items-center.flex-grow.border.rounded-md.focus-within\\:border-blue-500:focus-within {
    border-color: #3b82f6 !important; /* blue-500 */
  }

  /* Even more specific selector targeting the exact auth token wrapper */
  .mb-6
    .flex.items-center
    div.flex.items-center.flex-grow.border.rounded-md:focus-within {
    border-color: #3b82f6 !important; /* blue-500 */
  }

  /* Fix primary color focus states - convert purple to blue */
  .focus\\:border-primary-500:focus,
  .focus\\:border-primary-600:focus {
    border-color: #3b82f6 !important; /* blue-500 */
  }

  .focus\\:ring-primary-200:focus,
  .focus\\:ring-primary-300:focus {
    --tw-ring-color: rgba(
      59,
      130,
      246,
      0.2
    ) !important; /* blue-500 with opacity */
  }

  /* Fix select element styling */
  .form-select-themed {
    background-color: rgba(255, 255, 255, 0.95) !important;
    border: 1px solid rgba(0, 0, 0, 0.12) !important;
    color: #374151 !important; /* gray-700 */
    outline: none !important;
    box-shadow: none !important;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out !important;
  }

  .form-select-themed:focus {
    border-color: #3b82f6 !important; /* blue-500 */
    box-shadow: none !important; /* 绉婚櫎focus闃村奖 */
    outline: none !important;
  }

  /* Override any remaining primary colors */
  .text-primary-600,
  .text-primary-500 {
    color: #3b82f6 !important; /* blue-500 */
  }

  .bg-primary-600,
  .bg-primary-500 {
    background-color: #3b82f6 !important; /* blue-500 */
  }

  .bg-primary-700:hover,
  .hover\\:bg-primary-700:hover {
    background-color: #2563eb !important; /* blue-600 */
  }

  /* Fix dynamic input wrapper focus states - convert violet to blue */
  .focus-within\\:border-violet-400:focus-within,
  .focus-within\\:ring-violet-400:focus-within {
    border-color: #3b82f6 !important; /* blue-500 */
    box-shadow: none !important; /* 绉婚櫎focus闃村奖 */
  }

  /* Ensure all array input wrappers use blue theme */
  .array-container .flex.items-center.flex-grow.rounded-md {
    border-color: rgba(0, 0, 0, 0.12) !important;
  }

  .array-container .flex.items-center.flex-grow.rounded-md:focus-within {
    border-color: #3b82f6 !important; /* blue-500 */
    box-shadow: none !important; /* 绉婚櫎focus闃村奖 */
  }
</style>
{% endblock %} {% block content %}
<div class="container max-w-6xl mx-auto px-4">
  <div
    class="rounded-2xl shadow-xl p-6 md:p-8"
    style="
      background-color: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 0, 0, 0.08);
    "
  >
    <button
      class="absolute top-6 right-6 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full w-8 h-8 flex items-center justify-center text-primary-600 transition-all duration-300"
      onclick="refreshPage(this)"
      title="鎵嬪姩鍒锋柊"
    >
      <i class="fas fa-sync-alt"></i>
    </button>

    <h1 class="text-3xl font-extrabold text-center text-gray-800 mb-4">
      <img
        src="{{ static_url('icons/logo.png') }}"
        alt="Gemini Balance Logo"
        class="h-9 inline-block align-middle mr-2"
      />
      Gemini Balance - 閰嶇疆缂栬緫
    </h1>

    <!-- Navigation Tabs -->
    <div
      class="nav-buttons-container flex justify-center mb-8 overflow-x-auto gap-2"
    >
      <a
        href="/config"
        class="main-nav-btn whitespace-nowrap flex items-center justify-center gap-2 px-6 py-3 font-medium rounded-lg shadow-md hover:shadow-lg transition-all duration-200"
        style="background-color: #3b82f6 !important; color: #ffffff !important"
      >
        <i class="fas fa-cog"></i> 閰嶇疆缂栬緫
      </a>
      <a
        href="/keys"
        class="nav-link whitespace-nowrap flex items-center justify-center gap-2 px-6 py-3 font-medium rounded-lg text-gray-700 hover:text-gray-900 transition-all duration-200"
        style="background-color: rgba(229, 231, 235, 0.8)"
      >
        <i class="fas fa-tachometer-alt"></i> 鐩戞帶闈㈡澘
      </a>
      <a
        href="/gemini-assets"
        class="nav-link whitespace-nowrap flex items-center justify-center gap-2 px-6 py-3 font-medium rounded-lg text-gray-700 hover:text-gray-900 transition-all duration-200"
        style="background-color: rgba(229, 231, 235, 0.8)"
      >
        <i class="fas fa-key"></i> Gemini Key Assets
      </a>
      <a
        href="/gemini-assets#delete-anchor"
        class="nav-link whitespace-nowrap flex items-center justify-center gap-2 px-6 py-3 font-medium rounded-lg text-gray-700 hover:text-gray-900 transition-all duration-200"
        style="background-color: rgba(229, 231, 235, 0.8)"
      >
        <i class="fas fa-trash-alt"></i> 鍒犻櫎鏃犳晥 Key
      </a>
      <a
        href="/scanner-automation"
        class="nav-link whitespace-nowrap flex items-center justify-center gap-2 px-6 py-3 font-medium rounded-lg text-gray-700 hover:text-gray-900 transition-all duration-200"
        style="background-color: rgba(229, 231, 235, 0.8)"
      >
        <i class="fas fa-clock"></i> 鑷姩浠诲姟
      </a>
      <a
        href="/logs"
        class="nav-link whitespace-nowrap flex items-center justify-center gap-2 px-6 py-3 font-medium rounded-lg text-gray-700 hover:text-gray-900 transition-all duration-200"
        style="background-color: rgba(229, 231, 235, 0.8)"
      >
        <i class="fas fa-exclamation-triangle"></i> 閿欒鏃ュ織
      </a>
    </div>

    <!-- Config Tabs -->
    <div class="flex justify-center mb-6 flex-wrap gap-2">
      <button
        class="tab-btn active px-5 py-2 rounded-full font-medium text-sm transition-all duration-200"
        data-tab="api"
        style="
          background-color: #3b82f6 !important;
          color: #ffffff !important;
          border: 2px solid #2563eb !important;
          box-shadow: 0 4px 12px -2px rgba(59, 130, 246, 0.4),
            0 2px 6px -1px rgba(59, 130, 246, 0.2) !important;
          transform: translateY(-2px) !important;
          font-weight: 600 !important;
        "
      >
        API閰嶇疆
      </button>
      <button
        class="tab-btn px-5 py-2 rounded-full font-medium text-sm transition-all duration-200"
        data-tab="model"
        style="
          background-color: #f8fafc !important;
          color: #64748b !important;
          border: 2px solid #e2e8f0 !important;
          box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
          font-weight: 500 !important;
        "
      >
        妯″瀷閰嶇疆
      </button>
      <button
        class="tab-btn px-5 py-2 rounded-full font-medium text-sm transition-all duration-200"
        data-tab="tts"
        style="
          background-color: #f8fafc !important;
          color: #64748b !important;
          border: 2px solid #e2e8f0 !important;
          box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
          font-weight: 500 !important;
        "
      >
        TTS 閰嶇疆
      </button>
      <button
        class="tab-btn px-5 py-2 rounded-full font-medium text-sm transition-all duration-200"
        data-tab="image"
        style="
          background-color: #f8fafc !important;
          color: #64748b !important;
          border: 2px solid #e2e8f0 !important;
          box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
          font-weight: 500 !important;
        "
      >
        鍥惧儚鐢熸垚
      </button>
      <button
        class="tab-btn px-5 py-2 rounded-full font-medium text-sm transition-all duration-200"
        data-tab="stream"
        style="
          background-color: #f8fafc !important;
          color: #64748b !important;
          border: 2px solid #e2e8f0 !important;
          box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
          font-weight: 500 !important;
        "
      >
        娴佸紡杈撳嚭
      </button>
      <button
        class="tab-btn px-5 py-2 rounded-full font-medium text-sm transition-all duration-200"
        data-tab="scheduler"
        style="
          background-color: #f8fafc !important;
          color: #64748b !important;
          border: 2px solid #e2e8f0 !important;
          box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
          font-weight: 500 !important;
        "
      >
        瀹氭椂浠诲姟
      </button>
      <button
        class="tab-btn px-5 py-2 rounded-full font-medium text-sm transition-all duration-200"
        data-tab="logging"
        style="
          background-color: #f8fafc !important;
          color: #64748b !important;
          border: 2px solid #e2e8f0 !important;
          box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
          font-weight: 500 !important;
        "
      >
        鏃ュ織閰嶇疆
      </button>
    </div>

    <!-- Save Status Banner (Removed - using notification component now) -->

    <!-- Configuration Form -->
    <form id="configForm" class="mt-6">
      <!-- API 鐩稿叧閰嶇疆 -->
      <div class="config-section active" id="api-section">
        <h2
          class="text-xl font-bold mb-6 pb-3 border-b flex items-center gap-2 text-gray-800 border-gray-300"
        >
          <i class="fas fa-key text-blue-500"></i> API鐩稿叧閰嶇疆
        </h2>

        <!-- API瀵嗛挜鍒楄〃 -->
        <div class="mb-6">
          <label for="API_KEYS" class="block font-semibold mb-2 text-gray-800"
            >API瀵嗛挜鍒楄〃
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="Gemini API瀵嗛挜鍒楄〃锛屾瘡琛屼竴涓?></i>
          </label>
          <div class="mb-2">
            <input
              type="search"
              id="apiKeySearchInput"
              placeholder="鎼滅储瀵嗛挜..."
              class="w-full px-4 py-2 rounded-lg form-input-themed"
            />
          </div>
          <div class="array-container" id="API_KEYS_container">
            <!-- 鏁扮粍椤瑰皢鍦ㄨ繖閲屽姩鎬佹坊鍔?-->
          </div>
          <!-- API瀵嗛挜鍒嗛〉鎺т欢 -->
          <div id="apiKeyPagination" class="flex items-center justify-between mt-2 mb-2" style="display: none;">
            <div class="flex items-center gap-2">
              <button
                type="button"
                id="apiKeyPrevBtn"
                class="px-3 py-1 rounded bg-blue-500 text-white hover:bg-blue-600 cursor-pointer"
              >
                <i class="fas fa-chevron-left"></i> 涓婁竴椤?
              </button>
              <span id="apiKeyPageInfo" class="text-sm text-gray-600">绗?1 椤碉紝鍏?1 椤?/span>
              <button
                type="button"
                id="apiKeyNextBtn"
                class="px-3 py-1 rounded bg-blue-500 text-white hover:bg-blue-600 cursor-pointer"
              >
                涓嬩竴椤?<i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <div class="text-xs text-gray-500">
              姣忛〉鏄剧ず 20 涓瘑閽?
            </div>
          </div>
          <div class="flex justify-end gap-2">
            <button
              type="button"
              class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              id="bulkDeleteApiKeyBtn"
            >
              <i class="fas fa-trash-alt"></i> 鍒犻櫎瀵嗛挜
            </button>
            <button
              type="button"
              class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              id="addApiKeyBtn"
            >
              <i class="fas fa-plus"></i> 娣诲姞瀵嗛挜
            </button>
          </div>
        </div>

        <!-- 鍏佽鐨勪护鐗屽垪琛?-->
        <div class="mb-6">
          <label
            for="ALLOWED_TOKENS"
            class="block font-semibold mb-2 text-gray-800"
            >鍏佽鐨勪护鐗屽垪琛?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鍏佽璁块棶API鐨勪护鐗屽垪琛?></i>
          </label>
          <div class="array-container" id="ALLOWED_TOKENS_container">
            <!-- 鏁扮粍椤瑰皢鍦ㄨ繖閲屽姩鎬佹坊鍔?-->
          </div>
          <div class="flex justify-end">
            <button
              type="button"
              class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              onclick="addArrayItem('ALLOWED_TOKENS')"
            >
              <i class="fas fa-plus"></i> 娣诲姞浠ょ墝
            </button>
          </div>
        </div>

        <!-- 璁よ瘉浠ょ墝 -->
        <div class="mb-6">
          <label for="AUTH_TOKEN" class="block font-semibold mb-2 text-gray-800"
            >璁よ瘉浠ょ墝
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鐢ㄤ簬API璁よ瘉鐨勪护鐗?></i>
          </label>
          <div class="flex items-center">
            <div
              class="flex items-center flex-grow border rounded-md focus-within:border-blue-500"
              style="border-color: rgba(0, 0, 0, 0.12)"
            >
              <input
                type="text"
                id="AUTH_TOKEN"
                name="AUTH_TOKEN"
                placeholder="榛樿浣跨敤ALLOWED_TOKENS涓殑绗竴涓?
                class="array-input flex-grow px-3 py-2 rounded-l-md sensitive-input form-input-themed"
              />
              <button
                type="button"
                id="generateAuthTokenBtn"
                class="generate-btn px-2 py-2 text-gray-400 hover:text-blue-500 focus:outline-none rounded-r-md hover:bg-gray-600 transition-colors"
                title="鐢熸垚闅忔満浠ょ墝"
                style="background-color: rgba(59, 130, 246, 0.1)"
              >
                <i class="fas fa-dice"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- API鍩虹URL -->
        <div class="mb-6">
          <label for="BASE_URL" class="block font-semibold mb-2 text-gray-700"
            >API鍩虹URL
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="Gemini API鐨勫熀纭€URL"></i>
          </label>
          <input
            type="text"
            id="BASE_URL"
            name="BASE_URL"
            placeholder="https://generativelanguage.googleapis.com/v1beta"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- 鑷畾涔塇eaders -->
        <div class="mb-6">
          <label
            for="CUSTOM_HEADERS"
            class="block font-semibold mb-2 text-gray-700"
            >鑷畾涔塇eaders
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鍦ㄨ繖閲屾坊鍔犵殑閿€煎灏嗚娣诲姞鍒版墍鏈夊嚭绔橝PI璇锋眰鐨凥eader涓?></i>
          </label>
          <div
            class="bg-white rounded-lg border border-gray-200 p-4 mb-2 space-y-3"
            id="CUSTOM_HEADERS_container"
            style="
              background-color: rgba(255, 255, 255, 0.95);
              border: 1px solid rgba(0, 0, 0, 0.12);
              color: #374151;
            "
          >
            <!-- 閿€煎灏嗗湪杩欓噷鍔ㄦ€佹坊鍔?-->
            <div class="text-gray-500 text-sm italic">
              娣诲姞鑷畾涔夎姹傚ご锛屼緥濡?X-Api-Key: your-key
            </div>
          </div>
          <div class="flex justify-end">
            <button
              type="button"
              class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              id="addCustomHeaderBtn"
            >
              <i class="fas fa-plus"></i> 娣诲姞Header
            </button>
          </div>
        </div>

        <!-- Vertex Express API瀵嗛挜鍒楄〃 -->
        <div class="mb-6">
          <label
            for="VERTEX_API_KEYS"
            class="block font-semibold mb-2 text-gray-700"
            >Vertex Express API瀵嗛挜鍒楄〃
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="Vertex AI Platform API瀵嗛挜鍒楄〃銆傜偣鍑绘寜閽彲鎵归噺娣诲姞鎴栧垹闄?></i>
          </label>
          <div class="array-container" id="VERTEX_API_KEYS_container">
            <!-- 鏁扮粍椤瑰皢鍦ㄨ繖閲屽姩鎬佹坊鍔?-->
          </div>
          <div class="flex justify-end gap-2">
            <button
              type="button"
              class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              id="bulkDeleteVertexApiKeyBtn"
            >
              <i class="fas fa-trash-alt"></i> 鍒犻櫎Vertex瀵嗛挜
            </button>
            <button
              type="button"
              class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              id="addVertexApiKeyBtn"
            >
              <i class="fas fa-plus"></i> 娣诲姞Vertex瀵嗛挜
            </button>
          </div>
        </div>

        <!-- Vertex Express API鍩虹URL -->
        <div class="mb-6">
          <label
            for="VERTEX_EXPRESS_BASE_URL"
            class="block font-semibold mb-2 text-gray-700"
            >Vertex Express API鍩虹URL
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="Vertex Express API鐨勫熀纭€URL"></i>
          </label>
          <input
            type="text"
            id="VERTEX_EXPRESS_BASE_URL"
            name="VERTEX_EXPRESS_BASE_URL"
            placeholder="https://aiplatform.googleapis.com/v1beta1/publishers/google/models"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>
        <!-- 鏅鸿兘璺敱閰嶇疆 -->
        <div class="mb-6">
          <div class="flex items-center justify-between">
            <label
              for="URL_NORMALIZATION_ENABLED"
              class="font-semibold text-gray-700"
              >鍚敤鏅鸿兘璺敱鏄犲皠
              <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鑷姩瀹㈡埛绔姹傜殑url鎷兼帴涓烘纭牸寮忥紙浠呬繚璇佹甯歌亰澶╋紝鍑虹幇闂璇峰叧闂級"></i>
            </label>
            <div
              class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"
            >
              <input
                type="checkbox"
                name="URL_NORMALIZATION_ENABLED"
                id="URL_NORMALIZATION_ENABLED"
                class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"
              />
              <label
                for="URL_NORMALIZATION_ENABLED"
                class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"
              ></label>
            </div>
          </div>
        </div>
        <!-- 鏈€澶уけ璐ユ鏁?-->
        <div class="mb-6">
          <label
            for="MAX_FAILURES"
            class="block font-semibold mb-2 text-gray-700"
            >鏈€澶уけ璐ユ鏁?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="API瀵嗛挜澶辫触鍚庢爣璁颁负鏃犳晥鐨勬鏁?></i>
          </label>
          <input
            type="number"
            id="MAX_FAILURES"
            name="MAX_FAILURES"
            min="1"
            max="100"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- 璇锋眰瓒呮椂鏃堕棿 -->
        <div class="mb-6">
          <label for="TIME_OUT" class="block font-semibold mb-2 text-gray-700"
            >璇锋眰瓒呮椂鏃堕棿锛堢锛?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="API璇锋眰鐨勮秴鏃舵椂闂?></i>
          </label>
          <input
            type="number"
            id="TIME_OUT"
            name="TIME_OUT"
            min="1"
            max="600"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- 鏈€澶ч噸璇曟鏁?-->
        <div class="mb-6">
          <label
            for="MAX_RETRIES"
            class="block font-semibold mb-2 text-gray-700"
            >鏈€澶ч噸璇曟鏁?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="API璇锋眰澶辫触鍚庣殑鏈€澶ч噸璇曟鏁?></i>
          </label>
          <input
            type="number"
            id="MAX_RETRIES"
            name="MAX_RETRIES"
            min="0"
            max="10"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>
        <!-- 浠ｇ悊鏈嶅姟鍣ㄥ垪琛?-->
        <div class="mb-6">
          <label for="PROXIES" class="block font-semibold mb-2 text-gray-700"
            >浠ｇ悊鏈嶅姟鍣ㄥ垪琛?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="浠ｇ悊鏈嶅姟鍣ㄥ垪琛紝鏀寔 http 鍜?socks5 鏍煎紡锛屼緥濡? http://user:pass@host:port 鎴?socks5://host:port銆傜偣鍑绘寜閽彲鎵归噺娣诲姞鎴栧垹闄?></i>
          </label>
          <div class="array-container" id="PROXIES_container">
            <!-- 浠ｇ悊椤瑰皢鍦ㄨ繖閲屽姩鎬佹坊鍔?-->
          </div>
          <div class="flex justify-end gap-2">
            <button
              type="button"
              class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              id="bulkDeleteProxyBtn"
            >
              <i class="fas fa-trash-alt"></i> 鍒犻櫎浠ｇ悊
            </button>
            <button
              type="button"
              class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              id="checkAllProxiesBtn"
            >
              <i class="fas fa-globe"></i> 妫€娴嬫墍鏈変唬鐞?
            </button>
            <button
              type="button"
              class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              id="addProxyBtn"
            >
              <i class="fas fa-plus"></i> 娣诲姞浠ｇ悊
            </button>
          </div>
        </div>
        <!-- 浠ｇ悊浣跨敤绛栫暐 -->
        <div class="mb-6">
          <div class="flex items-center justify-between">
            <label
              for="PROXIES_USE_CONSISTENCY_HASH_BY_API_KEY"
              class="font-semibold text-gray-700"
              >鏄惁寮€鍚浐瀹氫唬鐞嗙瓥鐣?
              <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="寮€鍚悗锛屽浜庢瘡涓€涓狝PI_KEY灏嗘牴鎹畻娉曚粠浠ｇ悊鍒楄〃涓€夊彇鍚屼竴涓唬鐞咺P锛岄槻姝竴涓狝PI_KEY鍚屾椂琚涓狪P璁块棶锛屼篃鍚屾椂闃叉浜嗕竴涓狪P璁块棶浜嗚繃澶氱殑API_KEY"></i>
            </label>
            <div
              class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"
            >
              <input
                type="checkbox"
                name="PROXIES_USE_CONSISTENCY_HASH_BY_API_KEY"
                id="PROXIES_USE_CONSISTENCY_HASH_BY_API_KEY"
                class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"
              />
              <label
                for="PROXIES_USE_CONSISTENCY_HASH_BY_API_KEY"
                class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"
              ></label>
            </div>
          </div>
        </div>
      </div>

      <!-- 妯″瀷鐩稿叧閰嶇疆 -->
      <div class="config-section" id="model-section">
        <h2
          class="text-xl font-bold mb-6 pb-3 border-b flex items-center gap-2 text-gray-800 border-violet-300 border-opacity-30"
        >
          <i class="fas fa-robot text-violet-400"></i> 妯″瀷鐩稿叧閰嶇疆
        </h2>

        <!-- 娴嬭瘯妯″瀷 -->
        <div class="mb-6">
          <label for="TEST_MODEL" class="block font-semibold mb-2 text-gray-700"
            >娴嬭瘯妯″瀷
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鐢ㄤ簬娴嬭瘯API瀵嗛挜鐨勬ā鍨?></i>
          </label>
          <div class="flex items-center gap-2">
            <input
              type="text"
              id="TEST_MODEL"
              name="TEST_MODEL"
              placeholder="gemini-1.5-flash"
              class="flex-grow px-4 py-3 rounded-lg form-input-themed"
            />
            <button
              type="button"
              title="閫夋嫨妯″瀷"
              class="model-helper-trigger-btn p-2 rounded-md text-violet-300 hover:bg-violet-700 transition-colors"
              data-target-input-id="TEST_MODEL"
            >
              <i class="fas fa-list-ul"></i>
            </button>
          </div>
        </div>

        <!-- 鍥惧儚妯″瀷鍒楄〃 -->
        <div class="mb-6">
          <label
            for="IMAGE_MODELS"
            class="block font-semibold mb-2 text-gray-700"
            >鍥惧儚妯″瀷鍒楄〃
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鏀寔鍥惧儚澶勭悊鐨勬ā鍨嬪垪琛?></i>
          </label>
          <div class="array-container" id="IMAGE_MODELS_container">
            <!-- 鏁扮粍椤瑰皢鍦ㄨ繖閲屽姩鎬佹坊鍔?-->
          </div>
          <div class="flex justify-end gap-2 mt-2">
            <button
              type="button"
              title="浠庡垪琛ㄩ€夋嫨妯″瀷娣诲姞鍒颁笅鏂?
              class="model-helper-trigger-btn p-2 rounded-md text-violet-300 hover:bg-violet-700 transition-colors"
              data-target-array-key="IMAGE_MODELS"
            >
              <i class="fas fa-list-ul"></i>
            </button>
            <button
              type="button"
              class="bg-violet-600 hover:bg-violet-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              onclick="addArrayItem('IMAGE_MODELS')"
            >
              <i class="fas fa-plus"></i> 娣诲姞妯″瀷
            </button>
          </div>
        </div>

        <!-- 鎼滅储妯″瀷鍒楄〃 -->
        <div class="mb-6">
          <label
            for="SEARCH_MODELS"
            class="block font-semibold mb-2 text-gray-700"
            >鎼滅储妯″瀷鍒楄〃
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鏀寔鎼滅储鍔熻兘鐨勬ā鍨嬪垪琛?></i>
          </label>
          <div class="array-container" id="SEARCH_MODELS_container">
            <!-- 鏁扮粍椤瑰皢鍦ㄨ繖閲屽姩鎬佹坊鍔?-->
          </div>
          <div class="flex justify-end gap-2 mt-2">
            <button
              type="button"
              title="浠庡垪琛ㄩ€夋嫨妯″瀷娣诲姞鍒颁笅鏂?
              class="model-helper-trigger-btn p-2 rounded-md text-violet-300 hover:bg-violet-700 transition-colors"
              data-target-array-key="SEARCH_MODELS"
            >
              <i class="fas fa-list-ul"></i>
            </button>
            <button
              type="button"
              class="bg-violet-600 hover:bg-violet-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              onclick="addArrayItem('SEARCH_MODELS')"
            >
              <i class="fas fa-plus"></i> 娣诲姞妯″瀷
            </button>
          </div>
        </div>

        <!-- 杩囨护妯″瀷鍒楄〃 -->
        <div class="mb-6">
          <label
            for="FILTERED_MODELS"
            class="block font-semibold mb-2 text-gray-700"
            >杩囨护妯″瀷鍒楄〃
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="闇€瑕佽繃婊ょ殑妯″瀷鍒楄〃"></i>
          </label>
          <div class="array-container" id="FILTERED_MODELS_container">
            <!-- 鏁扮粍椤瑰皢鍦ㄨ繖閲屽姩鎬佹坊鍔?-->
          </div>
          <div class="flex justify-end gap-2 mt-2">
            <button
              type="button"
              title="浠庡垪琛ㄩ€夋嫨妯″瀷娣诲姞鍒颁笅鏂?
              class="model-helper-trigger-btn p-2 rounded-md text-violet-300 hover:bg-violet-700 transition-colors"
              data-target-array-key="FILTERED_MODELS"
            >
              <i class="fas fa-list-ul"></i>
            </button>
            <button
              type="button"
              class="bg-violet-600 hover:bg-violet-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              onclick="addArrayItem('FILTERED_MODELS')"
            >
              <i class="fas fa-plus"></i> 娣诲姞妯″瀷
            </button>
          </div>
        </div>

        <!-- 鍚敤浠ｇ爜鎵ц宸ュ叿 -->
        <div class="mb-6">
          <div class="flex items-center justify-between">
            <label
              for="TOOLS_CODE_EXECUTION_ENABLED"
              class="font-semibold text-gray-700"
              >鍚敤浠ｇ爜鎵ц宸ュ叿</label
            >
            <div
              class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"
            >
              <input
                type="checkbox"
                name="TOOLS_CODE_EXECUTION_ENABLED"
                id="TOOLS_CODE_EXECUTION_ENABLED"
                class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"
              />
              <label
                for="TOOLS_CODE_EXECUTION_ENABLED"
                class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"
              ></label>
            </div>
          </div>
          <div class="warning-text">
            <i class="fas fa-exclamation-triangle"></i>
            <span>鍚敤浠ｇ爜鎵ц宸ュ叿涓庡ぇ澶氭暟宸ュ叿璋冪敤鍐茬獊锛屼笉寤鸿寮€鍚?/span>
          </div>
        </div>

        <!-- 鍚敤缃戝潃涓婁笅鏂?-->
        <div class="mb-6 flex items-center justify-between">
          <label for="URL_CONTEXT_ENABLED" class="font-semibold text-gray-700"
            >鍚敤缃戝潃涓婁笅鏂?/label
          >
          <div
            class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"
          >
            <input
              type="checkbox"
              name="URL_CONTEXT_ENABLED"
              id="URL_CONTEXT_ENABLED"
              class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"
            />
            <label
              for="URL_CONTEXT_ENABLED"
              class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"
            ></label>
          </div>
        </div>

        <!-- 缃戝潃涓婁笅鏂囨ā鍨嬪垪琛?-->
        <div class="mb-6">
          <label
            for="URL_CONTEXT_MODELS"
            class="block font-semibold mb-2 text-gray-700"
            >缃戝潃涓婁笅鏂囨ā鍨嬪垪琛?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鏀寔缃戝潃涓婁笅鏂囧姛鑳界殑妯″瀷鍒楄〃"></i>
          </label>
          <div class="array-container" id="URL_CONTEXT_MODELS_container">
            <!-- 鏁扮粍椤瑰皢鍦ㄨ繖閲屽姩鎬佹坊鍔?-->
          </div>
          <div class="flex justify-end gap-2 mt-2">
            <button
              type="button"
              title="浠庡垪琛ㄩ€夋嫨妯″瀷娣诲姞鍒颁笅鏂?
              class="model-helper-trigger-btn p-2 rounded-md text-violet-300 hover:bg-violet-700 transition-colors"
              data-target-array-key="URL_CONTEXT_MODELS"
            >
              <i class="fas fa-list-ul"></i>
            </button>
            <button
              type="button"
              class="bg-violet-600 hover:bg-violet-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              onclick="addArrayItem('URL_CONTEXT_MODELS')"
            >
              <i class="fas fa-plus"></i> 娣诲姞妯″瀷
            </button>
          </div>
        </div>

        <!-- 鏄剧ず鎼滅储閾炬帴 -->
        <div class="mb-6 flex items-center justify-between">
          <label for="SHOW_SEARCH_LINK" class="font-semibold text-gray-700"
            >鏄剧ず鎼滅储閾炬帴</label
          >
          <div
            class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"
          >
            <input
              type="checkbox"
              name="SHOW_SEARCH_LINK"
              id="SHOW_SEARCH_LINK"
              class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"
            />
            <label
              for="SHOW_SEARCH_LINK"
              class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"
            ></label>
          </div>
        </div>

        <!-- 鏄剧ず鎬濊€冭繃绋?-->
        <div class="mb-6 flex items-center justify-between">
          <label for="SHOW_THINKING_PROCESS" class="font-semibold text-gray-700"
            >鏄剧ず鎬濊€冭繃绋?/label
          >
          <div
            class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"
          >
            <input
              type="checkbox"
              name="SHOW_THINKING_PROCESS"
              id="SHOW_THINKING_PROCESS"
              class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"
            />
            <label
              for="SHOW_THINKING_PROCESS"
              class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"
            ></label>
          </div>
        </div>

        <!-- 鎬濊€冩ā鍨嬪垪琛?-->
        <div class="mb-6">
          <label
            for="THINKING_MODELS"
            class="block font-semibold mb-2 text-gray-700"
            >鎬濊€冩ā鍨嬪垪琛?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鐢ㄤ簬鎬濊€冭繃绋嬬殑妯″瀷鍒楄〃"></i>
          </label>
          <div class="array-container" id="THINKING_MODELS_container">
            <!-- 鏁扮粍椤瑰皢鍦ㄨ繖閲屽姩鎬佹坊鍔?-->
          </div>
          <div class="flex justify-end gap-2 mt-2">
            <button
              type="button"
              title="浠庡垪琛ㄩ€夋嫨妯″瀷娣诲姞鍒颁笅鏂?
              class="model-helper-trigger-btn p-2 rounded-md text-violet-300 hover:bg-violet-700 transition-colors"
              data-target-array-key="THINKING_MODELS"
            >
              <i class="fas fa-list-ul"></i>
            </button>
            <button
              type="button"
              class="bg-violet-600 hover:bg-violet-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              onclick="addArrayItem('THINKING_MODELS')"
            >
              <i class="fas fa-plus"></i> 娣诲姞妯″瀷
            </button>
          </div>
        </div>

        <!-- 鎬濊€冩ā鍨嬮绠楁槧灏?-->
        <div class="mb-6">
          <label
            for="THINKING_BUDGET_MAP"
            class="block font-semibold mb-2 text-gray-700"
            >鎬濊€冩ā鍨嬮绠楁槧灏?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="涓烘瘡涓€濊€冩ā鍨嬭缃绠楋紙-1涓篴uto锛屾渶澶у€?2767锛夛紝姝ら」涓庝笂鏂规ā鍨嬪垪琛ㄨ嚜鍔ㄥ叧鑱?></i>
          </label>
          <div
            class="bg-white rounded-lg border border-gray-200 p-4 mb-2 space-y-3"
            id="THINKING_BUDGET_MAP_container"
            style="
              background-color: rgba(255, 255, 255, 0.95);
              border: 1px solid rgba(0, 0, 0, 0.12);
              color: #374151;
            "
          >
            <!-- 閿€煎灏嗗湪杩欓噷鍔ㄦ€佹坊鍔?-->
            <div class="text-gray-500 text-sm italic">
              璇峰厛鍦ㄤ笂鏂规坊鍔犳€濊€冩ā鍨嬶紝鐒跺悗鍦ㄦ澶勯厤缃绠椼€?
            </div>
          </div>
          <!-- 绉婚櫎娣诲姞棰勭畻鏄犲皠鎸夐挳 -->
          <!-- <div class="flex justify-end">
                            <button type="button" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2" id="addBudgetMapItemBtn">
                                <i class="fas fa-plus"></i> 娣诲姞棰勭畻鏄犲皠
                            </button>
                        </div> -->
        </div>
        <!-- 瀹夊叏璁剧疆 -->
        <div class="mb-6">
          <label
            for="SAFETY_SETTINGS"
            class="block font-semibold mb-2 text-gray-700"
            >瀹夊叏璁剧疆 (Safety Settings)
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="閰嶇疆妯″瀷鐨勫畨鍏ㄨ繃婊ょ骇鍒紝渚嬪 HARM_CATEGORY_HARASSMENT: BLOCK_NONE"></i>
          </label>
          <div
            class="bg-white rounded-lg border border-gray-200 p-4 mb-2 space-y-3"
            id="SAFETY_SETTINGS_container"
            style="
              background-color: rgba(255, 255, 255, 0.95);
              border: 1px solid rgba(0, 0, 0, 0.12);
              color: #374151;
            "
          >
            <!-- 瀹夊叏璁剧疆椤瑰皢鍦ㄨ繖閲屽姩鎬佹坊鍔?-->
            <div class="text-gray-500 text-sm italic">
              瀹氫箟妯″瀷鐨勫畨鍏ㄨ繃婊ら槇鍊笺€?
            </div>
          </div>
          <div class="flex justify-end">
            <button
              type="button"
              class="bg-violet-600 hover:bg-violet-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"
              id="addSafetySettingBtn"
            >
              <i class="fas fa-plus"></i> 娣诲姞瀹夊叏璁剧疆
            </button>
          </div>
          <div class="warning-text">
            <i class="fas fa-exclamation-triangle"></i>
            <span
              >寤鸿璁剧疆鎴怬FF锛屽叾浠栧€间細褰卞搷杈撳嚭閫熷害锛岄潪蹇呰涓嶈闅忎究鏀瑰姩銆?/span
            >
          </div>
        </div>
      </div>

      <!-- TTS閰嶇疆 -->
      <div class="config-section" id="tts-section">
        <h2
          class="text-xl font-bold mb-6 pb-3 border-b flex items-center gap-2 text-gray-800 border-violet-300 border-opacity-30"
        >
          <i class="fas fa-volume-up text-violet-400"></i> TTS 鐩稿叧閰嶇疆
        </h2>

        <!-- TTS 妯″瀷 -->
        <div class="mb-6">
          <label for="TTS_MODEL" class="block font-semibold mb-2 text-gray-700"
            >TTS 妯″瀷
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鐢ㄤ簬TTS鐨勬ā鍨?></i>
          </label>
          <select
            id="TTS_MODEL"
            name="TTS_MODEL"
            class="w-full px-4 py-3 rounded-lg form-select-themed"
          >
            <option value="gemini-2.5-flash-preview-tts">
              gemini-2.5-flash-preview-tts
            </option>
            <option value="gemini-2.5-pro-preview-tts">
              gemini-2.5-pro-preview-tts
            </option>
          </select>
        </div>

        <!-- TTS 璇煶鍚嶇О -->
        <div class="mb-6">
          <label
            for="TTS_VOICE_NAME"
            class="block font-semibold mb-2 text-gray-700"
            >TTS 璇煶鍚嶇О
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="TTS 鐨勮闊冲悕绉帮紝鎺у埗椋庢牸銆佽璋冦€佸彛闊冲拰鑺傚"></i>
          </label>
          <select
            id="TTS_VOICE_NAME"
            name="TTS_VOICE_NAME"
            class="w-full px-4 py-3 rounded-lg form-select-themed"
          >
            <option value="Zephyr">Zephyr (鏄庝寒)</option>
            <option value="Puck">Puck (娆㈠揩)</option>
            <option value="Charon">Charon (淇℃伅涓板瘜)</option>
            <option value="Kore">Kore (鍧氬畾)</option>
            <option value="Fenrir">Fenrir (鏄撴縺鍔?</option>
            <option value="Leda">Leda (骞磋交)</option>
            <option value="Orus">Orus (鍧氬畾)</option>
            <option value="Aoede">Aoede (杞绘澗)</option>
            <option value="Callirrhoe">Callirrhoe (闅忓拰)</option>
            <option value="Autonoe">Autonoe (鏄庝寒)</option>
            <option value="Enceladus">Enceladus (鍛煎惛鎰?</option>
            <option value="Iapetus">Iapetus (娓呮櫚)</option>
            <option value="Umbriel">Umbriel (闅忓拰)</option>
            <option value="Algieba">Algieba (骞虫粦)</option>
            <option value="Despina">Despina (骞虫粦)</option>
            <option value="Erinome">Erinome (娓呮櫚)</option>
            <option value="Algenib">Algenib (娌欏搼)</option>
            <option value="Rasalgethi">Rasalgethi (淇℃伅涓板瘜)</option>
            <option value="Laomedeia">Laomedeia (娆㈠揩)</option>
            <option value="Achernar">Achernar (杞绘煍)</option>
            <option value="Alnilam">Alnilam (鍧氬畾)</option>
            <option value="Schedar">Schedar (骞崇ǔ)</option>
            <option value="Gacrux">Gacrux (鎴愮啛)</option>
            <option value="Pulcherrima">Pulcherrima (鍚戝墠)</option>
            <option value="Achird">Achird (鍙嬪ソ)</option>
            <option value="Zubenelgenubi">Zubenelgenubi (浼戦棽)</option>
            <option value="Vindemiatrix">Vindemiatrix (娓╂煍)</option>
            <option value="Sadachbia">Sadachbia (娲绘臣)</option>
            <option value="Sadaltager">Sadaltager (鍗氬)</option>
            <option value="Sulafat">Sulafat (娓╂殩)</option>
          </select>
        </div>

        <!-- TTS 璇€?-->
        <div class="mb-6">
          <label for="TTS_SPEED" class="block font-semibold mb-2 text-gray-700"
            >TTS 璇€?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="閫夋嫨 TTS 鐨勮閫?></i>
          </label>
          <select
            id="TTS_SPEED"
            name="TTS_SPEED"
            class="w-full px-4 py-3 rounded-lg form-select-themed"
          >
            <option value="slow">鎱?/option>
            <option value="normal">姝ｅ父</option>
            <option value="fast">蹇?/option>
          </select>
        </div>
      </div>

      <!-- 鍥惧儚鐢熸垚鐩稿叧閰嶇疆 -->
      <div class="config-section" id="image-section">
        <h2
          class="text-xl font-bold mb-6 pb-3 border-b flex items-center gap-2 text-gray-800 border-violet-300 border-opacity-30"
        >
          <i class="fas fa-image text-violet-400"></i> 鍥惧儚鐢熸垚閰嶇疆
        </h2>

        <!-- 浠樿垂API瀵嗛挜 -->
        <div class="mb-6">
          <label for="PAID_KEY" class="block font-semibold mb-2 text-gray-700"
            >浠樿垂API瀵嗛挜
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鐢ㄤ簬鍥惧儚鐢熸垚鐨勪粯璐笰PI瀵嗛挜"></i>
          </label>
          <input
            type="text"
            id="PAID_KEY"
            name="PAID_KEY"
            placeholder="AIzaSyxxxxxxxxxxxxxxxxxxx"
            class="w-full px-4 py-3 rounded-lg sensitive-input form-input-themed"
          />
        </div>

        <!-- 鍥惧儚鐢熸垚妯″瀷 -->
        <div class="mb-6">
          <label
            for="CREATE_IMAGE_MODEL"
            class="block font-semibold mb-2 text-gray-700"
            >鍥惧儚鐢熸垚妯″瀷
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鐢ㄤ簬鍥惧儚鐢熸垚鐨勬ā鍨?></i>
          </label>
          <div class="flex items-center gap-2">
            <input
              type="text"
              id="CREATE_IMAGE_MODEL"
              name="CREATE_IMAGE_MODEL"
              placeholder="imagen-3.0-generate-002"
              class="flex-grow px-4 py-3 rounded-lg form-input-themed"
            />
            <button
              type="button"
              title="閫夋嫨妯″瀷"
              class="model-helper-trigger-btn p-2 rounded-md text-violet-300 hover:bg-violet-700 transition-colors"
              data-target-input-id="CREATE_IMAGE_MODEL"
            >
              <i class="fas fa-list-ul"></i>
            </button>
          </div>
        </div>

        <!-- 涓婁紶鎻愪緵鍟?-->
        <div class="mb-6">
          <label
            for="UPLOAD_PROVIDER"
            class="block font-semibold mb-2 text-gray-700"
            >涓婁紶鎻愪緵鍟?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鍥剧墖涓婁紶鏈嶅姟鎻愪緵鍟?></i>
          </label>
          <select
            id="UPLOAD_PROVIDER"
            name="UPLOAD_PROVIDER"
            class="w-full px-4 py-3 rounded-lg form-select-themed"
          >
            <option value="smms" selected>SM.MS</option>
            <option value="picgo">PicGo</option>
            <option value="cloudflare_imgbed">Cloudflare</option>
            <option value="aliyun_oss">闃块噷浜慜SS</option>
          </select>
        </div>

        <!-- SM.MS瀵嗛挜 -->
        <div class="mb-6 provider-config active" data-provider="smms">
          <label
            for="SMMS_SECRET_TOKEN"
            class="block font-semibold mb-2 text-gray-700"
            >SM.MS瀵嗛挜
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="SM.MS鍥惧簥鐨勫瘑閽?></i>
          </label>
          <input
            type="text"
            id="SMMS_SECRET_TOKEN"
            name="SMMS_SECRET_TOKEN"
            placeholder="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
            class="w-full px-4 py-3 rounded-lg sensitive-input form-input-themed"
          />
        </div>

        <!-- PicGo API URL -->
        <div class="mb-6 provider-config" data-provider="picgo">
          <label
            for="PICGO_API_URL"
            class="block font-semibold mb-2 text-gray-700"
            >PicGo API鍦板潃
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="PicGo鏈嶅姟鍣ㄧ殑API鍦板潃锛岄粯璁や负 https://www.picgo.net/api/1/upload"></i>
          </label>
          <input
            type="text"
            id="PICGO_API_URL"
            name="PICGO_API_URL"
            placeholder="https://www.picgo.net/api/1/upload"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- PicGo API瀵嗛挜 -->
        <div class="mb-6 provider-config" data-provider="picgo">
          <label
            for="PICGO_API_KEY"
            class="block font-semibold mb-2 text-gray-700"
            >PicGo API瀵嗛挜
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="PicGo鐨凙PI瀵嗛挜"></i>
          </label>
          <input
            type="text"
            id="PICGO_API_KEY"
            name="PICGO_API_KEY"
            placeholder="xxxx"
            class="w-full px-4 py-3 rounded-lg sensitive-input form-input-themed"
          />
        </div>

        <!-- Cloudflare鍥惧簥URL -->
        <div class="mb-6 provider-config" data-provider="cloudflare_imgbed">
          <label
            for="CLOUDFLARE_IMGBED_URL"
            class="block font-semibold mb-2 text-gray-700"
            >Cloudflare鍥惧簥URL
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="Cloudflare鍥惧簥鐨刄RL"></i>
          </label>
          <input
            type="text"
            id="CLOUDFLARE_IMGBED_URL"
            name="CLOUDFLARE_IMGBED_URL"
            placeholder="https://xxxxxxx.pages.dev/upload"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- Cloudflare璁よ瘉鐮?-->
        <div class="mb-6 provider-config" data-provider="cloudflare_imgbed">
          <label
            for="CLOUDFLARE_IMGBED_AUTH_CODE"
            class="block font-semibold mb-2 text-gray-700"
            >Cloudflare璁よ瘉鐮?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="Cloudflare鍥惧簥鐨勮璇佺爜"></i>
          </label>
          <input
            type="text"
            id="CLOUDFLARE_IMGBED_AUTH_CODE"
            name="CLOUDFLARE_IMGBED_AUTH_CODE"
            placeholder="xxxxxxxxx"
            class="w-full px-4 py-3 rounded-lg sensitive-input form-input-themed"
          />
        </div>

        <!-- Cloudflare涓婁紶鏂囦欢澶?-->
        <div class="mb-6 provider-config" data-provider="cloudflare_imgbed">
          <label
            for="CLOUDFLARE_IMGBED_UPLOAD_FOLDER"
            class="block font-semibold mb-2 text-gray-700"
            >Cloudflare涓婁紶鏂囦欢澶?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="Cloudflare鍥惧簥鐨勪笂浼犳枃浠跺す璺緞锛堝彲閫夛級"></i>
          </label>
          <input
            type="text"
            id="CLOUDFLARE_IMGBED_UPLOAD_FOLDER"
            name="CLOUDFLARE_IMGBED_UPLOAD_FOLDER"
            placeholder=""
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- 闃块噷浜慜SS閰嶇疆 -->
        <!-- OSS Endpoint -->
        <div class="mb-6 provider-config" data-provider="aliyun_oss">
          <label
            for="OSS_ENDPOINT"
            class="block font-semibold mb-2 text-gray-700"
            >OSS Endpoint
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="闃块噷浜慜SS鐨凟ndpoint鍦板潃"></i>
          </label>
          <input
            type="text"
            id="OSS_ENDPOINT"
            name="OSS_ENDPOINT"
            placeholder="oss-cn-shanghai.aliyuncs.com"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- OSS Access Key -->
        <div class="mb-6 provider-config" data-provider="aliyun_oss">
          <label
            for="OSS_ACCESS_KEY"
            class="block font-semibold mb-2 text-gray-700"
            >OSS Access Key
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="闃块噷浜慜SS鐨凙ccess Key ID"></i>
          </label>
          <input
            type="text"
            id="OSS_ACCESS_KEY"
            name="OSS_ACCESS_KEY"
            placeholder="LTAI5txxxxxxxxxx"
            class="w-full px-4 py-3 rounded-lg sensitive-input form-input-themed"
          />
        </div>

        <!-- OSS Access Key Secret -->
        <div class="mb-6 provider-config" data-provider="aliyun_oss">
          <label
            for="OSS_ACCESS_KEY_SECRET"
            class="block font-semibold mb-2 text-gray-700"
            >OSS Access Key Secret
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="闃块噷浜慜SS鐨凙ccess Key Secret"></i>
          </label>
          <input
            type="password"
            id="OSS_ACCESS_KEY_SECRET"
            name="OSS_ACCESS_KEY_SECRET"
            placeholder="yXxxxxxxxxxxxx"
            class="w-full px-4 py-3 rounded-lg sensitive-input form-input-themed"
          />
        </div>

        <!-- OSS Bucket Name -->
        <div class="mb-6 provider-config" data-provider="aliyun_oss">
          <label
            for="OSS_BUCKET_NAME"
            class="block font-semibold mb-2 text-gray-700"
            >OSS Bucket鍚嶇О
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="闃块噷浜慜SS鐨凚ucket鍚嶇О"></i>
          </label>
          <input
            type="text"
            id="OSS_BUCKET_NAME"
            name="OSS_BUCKET_NAME"
            placeholder="your-bucket-name"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- OSS Region -->
        <div class="mb-6 provider-config" data-provider="aliyun_oss">
          <label
            for="OSS_REGION"
            class="block font-semibold mb-2 text-gray-700"
            >OSS Region
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="闃块噷浜慜SS鐨凴egion鍖哄煙"></i>
          </label>
          <input
            type="text"
            id="OSS_REGION"
            name="OSS_REGION"
            placeholder="cn-shanghai"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- OSS Internal Endpoint (鍙€? -->
        <div class="mb-6 provider-config" data-provider="aliyun_oss">
          <label
            for="OSS_ENDPOINT_INNER"
            class="block font-semibold mb-2 text-gray-700"
            >OSS鍐呯綉Endpoint锛堝彲閫夛級
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="闃块噷浜慜SS鐨勫唴缃慐ndpoint鍦板潃锛堝彲閫夛級"></i>
          </label>
          <input
            type="text"
            id="OSS_ENDPOINT_INNER"
            name="OSS_ENDPOINT_INNER"
            placeholder="oss-cn-shanghai-internal.aliyuncs.com"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>
      </div>

      <!-- 娴佸紡杈撳嚭浼樺寲閰嶇疆 -->
      <div class="config-section" id="stream-section">
        <h2
          class="text-xl font-bold mb-6 pb-3 border-b flex items-center gap-2 text-gray-800 border-violet-300 border-opacity-30"
        >
          <i class="fas fa-stream text-violet-400"></i> 娴佸紡杈撳嚭鐩稿叧閰嶇疆
        </h2>

        <!-- 鍚敤娴佸紡杈撳嚭浼樺寲 -->
        <div class="mb-6">
          <div class="flex items-center justify-between">
            <label
              for="STREAM_OPTIMIZER_ENABLED"
              class="font-semibold text-gray-700"
              >鍚敤娴佸紡杈撳嚭浼樺寲</label
            >
            <div
              class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"
            >
              <input
                type="checkbox"
                name="STREAM_OPTIMIZER_ENABLED"
                id="STREAM_OPTIMIZER_ENABLED"
                class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"
              />
              <label
                for="STREAM_OPTIMIZER_ENABLED"
                class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"
              ></label>
            </div>
          </div>
          <div class="warning-text">
            <i class="fas fa-exclamation-triangle"></i>
            <span>寮€鍚祦寮忎紭鍖栦細鍦ㄤ竴瀹氱▼搴︿笂鍑忛€熻繑鍥烇紝涓嶅缓璁紑鍚?/span>
          </div>
        </div>

        <!-- 鏈€灏忓欢杩?-->
        <div class="mb-6">
          <label
            for="STREAM_MIN_DELAY"
            class="block font-semibold mb-2 text-gray-700"
            >鏈€灏忓欢杩燂紙绉掞級
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="娴佸紡杈撳嚭鐨勬渶灏忓欢杩熸椂闂?></i>
          </label>
          <input
            type="number"
            id="STREAM_MIN_DELAY"
            name="STREAM_MIN_DELAY"
            min="0"
            max="1"
            step="0.001"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- 鏈€澶у欢杩?-->
        <div class="mb-6">
          <label
            for="STREAM_MAX_DELAY"
            class="block font-semibold mb-2 text-gray-700"
            >鏈€澶у欢杩燂紙绉掞級
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="娴佸紡杈撳嚭鐨勬渶澶у欢杩熸椂闂?></i>
          </label>
          <input
            type="number"
            id="STREAM_MAX_DELAY"
            name="STREAM_MAX_DELAY"
            min="0"
            max="1"
            step="0.001"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- 鐭枃鏈槇鍊?-->
        <div class="mb-6">
          <label
            for="STREAM_SHORT_TEXT_THRESHOLD"
            class="block font-semibold mb-2 text-gray-700"
            >鐭枃鏈槇鍊?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鐭枃鏈殑瀛楃闃堝€?></i>
          </label>
          <input
            type="number"
            id="STREAM_SHORT_TEXT_THRESHOLD"
            name="STREAM_SHORT_TEXT_THRESHOLD"
            min="1"
            max="100"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- 闀挎枃鏈槇鍊?-->
        <div class="mb-6">
          <label
            for="STREAM_LONG_TEXT_THRESHOLD"
            class="block font-semibold mb-2 text-gray-700"
            >闀挎枃鏈槇鍊?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="闀挎枃鏈殑瀛楃闃堝€?></i>
          </label>
          <input
            type="number"
            id="STREAM_LONG_TEXT_THRESHOLD"
            name="STREAM_LONG_TEXT_THRESHOLD"
            min="1"
            max="1000"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- 鍒嗗潡澶у皬 -->
        <div class="mb-6">
          <label
            for="STREAM_CHUNK_SIZE"
            class="block font-semibold mb-2 text-gray-700"
            >鍒嗗潡澶у皬
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="娴佸紡杈撳嚭鐨勫垎鍧楀ぇ灏?></i>
          </label>
          <input
            type="number"
            id="STREAM_CHUNK_SIZE"
            name="STREAM_CHUNK_SIZE"
            min="1"
            max="100"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

        <!-- Fake Streaming Configuration -->
        <h3
          class="text-lg font-semibold mb-4 pt-4 border-t border-violet-300 border-opacity-20 text-gray-200"
        >
          <i class="fas fa-ghost text-violet-400"></i> 鍋囨祦寮忛厤缃?(Fake
          Streaming)
        </h3>

        <!-- 鍚敤鍋囨祦寮忚緭鍑?-->
        <div class="mb-6 flex items-center justify-between">
          <label for="FAKE_STREAM_ENABLED" class="font-semibold text-gray-700"
            >鍚敤鍋囨祦寮忚緭鍑?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="褰撳惎鐢ㄦ椂锛屽皢璋冪敤闈炴祦寮忔帴鍙ｏ紝骞跺湪绛夊緟鍝嶅簲鏈熼棿鍙戦€佺┖鏁版嵁浠ョ淮鎸佽繛鎺?></i>
          </label>
          <div
            class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"
          >
            <input
              type="checkbox"
              name="FAKE_STREAM_ENABLED"
              id="FAKE_STREAM_ENABLED"
              class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"
            />
            <label
              for="FAKE_STREAM_ENABLED"
              class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"
            ></label>
          </div>
        </div>

        <!-- 鍋囨祦寮忓彂閫佺┖鏁版嵁鐨勯棿闅旀椂闂?-->
        <div class="mb-6">
          <label
            for="FAKE_STREAM_EMPTY_DATA_INTERVAL_SECONDS"
            class="block font-semibold mb-2 text-gray-700"
            >鍋囨祦寮忕┖鏁版嵁鍙戦€侀棿闅旓紙绉掞級
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鍦ㄥ惎鐢ㄥ亣娴佸紡杈撳嚭鏃讹紝鍚戝鎴风鍙戦€佺┖鏁版嵁浠ョ淮鎸佽繛鎺ョ姸鎬佺殑鏃堕棿闂撮殧锛堝缓璁?3-10 绉掞級"></i>
          </label>
          <input
            type="number"
            id="FAKE_STREAM_EMPTY_DATA_INTERVAL_SECONDS"
            name="FAKE_STREAM_EMPTY_DATA_INTERVAL_SECONDS"
            min="1"
            max="60"
            step="1"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>
      </div>

      <!-- 瀹氭椂浠诲姟閰嶇疆 -->
      <div class="config-section" id="scheduler-section">
        <h2
          class="text-xl font-bold mb-6 pb-3 border-b flex items-center gap-2 text-gray-800 border-violet-300 border-opacity-30"
        >
          <i class="fas fa-clock text-violet-400"></i> 瀹氭椂浠诲姟閰嶇疆
        </h2>

        <!-- 妫€鏌ラ棿闅?-->
        <div class="mb-6">
          <label
            for="CHECK_INTERVAL_HOURS"
            class="block font-semibold mb-2 text-gray-700"
            >妫€鏌ラ棿闅旓紙灏忔椂锛?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="瀹氭椂妫€鏌ュ瘑閽ョ姸鎬佺殑闂撮殧鏃堕棿锛堝崟浣嶏細灏忔椂锛夛紝璁剧疆涓?鏃朵笉杩涜瀹氭椂妫€鏌?></i>
          </label>
          <input
            type="number"
            id="CHECK_INTERVAL_HOURS"
            name="CHECK_INTERVAL_HOURS"
            min="0"
            step="1"
            class="w-full px-4 py-3 rounded-lg form-input-themed"
          />
        </div>

      </div>

      <!-- 鏃ュ織閰嶇疆 -->
      <div class="config-section" id="logging-section">
        <h2
          class="text-xl font-bold mb-6 pb-3 border-b flex items-center gap-2 text-gray-800 border-violet-300 border-opacity-30"
        >
          <i class="fas fa-file-alt text-violet-400"></i> 鏃ュ織閰嶇疆
        </h2>

        <!-- 鏃ュ織绾у埆 -->
        <div class="mb-6">
          <label for="LOG_LEVEL" class="block font-semibold mb-2 text-gray-700"
            >鏃ュ織绾у埆
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="璁剧疆搴旂敤绋嬪簭鐨勬棩蹇楄褰曡缁嗙▼搴?></i>
          </label>
          <select
            id="LOG_LEVEL"
            name="LOG_LEVEL"
            class="w-full px-4 py-3 rounded-lg form-select-themed"
          >
            <option value="DEBUG">DEBUG</option>
            <option value="INFO">INFO</option>
            <option value="WARNING">WARNING</option>
            <option value="ERROR">ERROR</option>
            <option value="CRITICAL">CRITICAL</option>
          </select>
        </div>

        <!-- 閿欒鏃ュ織璁板綍璇锋眰浣?-->
        <div class="mb-6">
          <div class="flex items-center justify-between">
            <label
              for="ERROR_LOG_RECORD_REQUEST_BODY"
              class="font-semibold text-gray-700"
              >閿欒鏃ュ織璁板綍璇锋眰浣?
              <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="鍏抽棴鍙噺灏戝ぇ閲忕鐩樼┖闂村崰鐢紝榛樿鍏抽棴"></i>
            </label>
            <div
              class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"
            >
              <input
                type="checkbox"
                name="ERROR_LOG_RECORD_REQUEST_BODY"
                id="ERROR_LOG_RECORD_REQUEST_BODY"
                class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"
              />
              <label
                for="ERROR_LOG_RECORD_REQUEST_BODY"
                class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"
              ></label>
            </div>
          </div>
        </div>

        <!-- 鑷姩鍒犻櫎閿欒鏃ュ織 -->
        <div class="mb-6">
          <div class="flex items-center justify-between">
            <label
              for="AUTO_DELETE_ERROR_LOGS_ENABLED"
              class="font-semibold text-gray-700"
              >鏄惁寮€鍚嚜鍔ㄥ垹闄ら敊璇棩蹇?
              <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="寮€鍚悗锛屽皢鑷姩鍒犻櫎鎸囧畾澶╂暟鍓嶇殑閿欒鏃ュ織"></i>
            </label>
            <div
              class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"
            >
              <input
                type="checkbox"
                name="AUTO_DELETE_ERROR_LOGS_ENABLED"
                id="AUTO_DELETE_ERROR_LOGS_ENABLED"
                class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"
              />
              <label
                for="AUTO_DELETE_ERROR_LOGS_ENABLED"
                class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"
              ></label>
            </div>
          </div>
        </div>

        <!-- 鑷姩鍒犻櫎鏃ュ織澶╂暟 -->
        <div class="mb-6">
          <label
            for="AUTO_DELETE_ERROR_LOGS_DAYS"
            class="block font-semibold mb-2 text-gray-700"
            >鑷姩鍒犻櫎澶氬皯澶╁墠鐨勯敊璇棩蹇?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="閫夋嫨鑷姩鍒犻櫎閿欒鏃ュ織鐨勫ぉ鏁?></i>
          </label>
          <select
            id="AUTO_DELETE_ERROR_LOGS_DAYS"
            name="AUTO_DELETE_ERROR_LOGS_DAYS"
            class="w-full px-4 py-3 rounded-lg form-select-themed"
          >
            <option value="1">1 澶?/option>
            <option value="7">7 澶?/option>
            <option value="30">30 澶?/option>
          </select>
        </div>

        <!-- 鑷姩鍒犻櫎璇锋眰鏃ュ織 -->
        <div class="mb-6">
          <div class="flex items-center justify-between">
            <label
              for="AUTO_DELETE_REQUEST_LOGS_ENABLED"
              class="font-semibold text-gray-700"
              >鏄惁寮€鍚嚜鍔ㄥ垹闄よ姹傛棩蹇?
              <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="寮€鍚悗锛屽皢鑷姩鍒犻櫎鎸囧畾澶╂暟鍓嶇殑璇锋眰鏃ュ織"></i>
            </label>
            <div
              class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"
            >
              <input
                type="checkbox"
                name="AUTO_DELETE_REQUEST_LOGS_ENABLED"
                id="AUTO_DELETE_REQUEST_LOGS_ENABLED"
                class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"
              />
              <label
                for="AUTO_DELETE_REQUEST_LOGS_ENABLED"
                class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"
              ></label>
            </div>
          </div>
        </div>

        <!-- 鑷姩鍒犻櫎璇锋眰鏃ュ織澶╂暟 -->
        <div class="mb-6">
          <label
            for="AUTO_DELETE_REQUEST_LOGS_DAYS"
            class="block font-semibold mb-2 text-gray-700"
            >鑷姩鍒犻櫎澶氬皯澶╁墠鐨勮姹傛棩蹇?
            <i class="fas fa-question-circle text-gray-400 ml-1 cursor-help" title="閫夋嫨鑷姩鍒犻櫎璇锋眰鏃ュ織鐨勫ぉ鏁?></i>
          </label>
          <select
            id="AUTO_DELETE_REQUEST_LOGS_DAYS"
            name="AUTO_DELETE_REQUEST_LOGS_DAYS"
            class="w-full px-4 py-3 rounded-lg form-select-themed"
          >
            <option value="1">1 澶?/option>
            <option value="7">7 澶?/option>
            <option value="30">30 澶?/option>
          </select>
        </div>
      </div>

      <!-- Action Buttons -->
      <div
        class="flex flex-col md:flex-row justify-center gap-4 mt-8 pt-4 pb-2"
      >
        <button
          type="button"
          id="saveBtn"
          class="action-btn text-white px-8 py-3 rounded-xl font-semibold transition-all duration-300 hover:shadow-lg flex items-center justify-center gap-2"
          style="
            background-color: #3b82f6 !important;
            color: #ffffff !important;
          "
        >
          <i class="fas fa-save"></i> 淇濆瓨閰嶇疆
        </button>
        <button
          type="button"
          id="resetBtn"
          class="action-btn bg-gradient-to-r from-gray-600 to-gray-700 text-white px-8 py-3 rounded-xl font-semibold transition-all duration-300 hover:shadow-lg flex items-center justify-center gap-2"
          style="
            background-color: #6b7280 !important;
            color: #ffffff !important;
          "
        >
          <i class="fas fa-undo"></i> 閲嶇疆閰嶇疆
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Scroll buttons are now in base.html -->
<div class="scroll-buttons">
  <button class="scroll-button" onclick="scrollToTop()" title="鍥炲埌椤堕儴">
    <i class="fas fa-chevron-up"></i>
  </button>
  <button class="scroll-button" onclick="scrollToBottom()" title="婊氬姩鍒板簳閮?>
    <i class="fas fa-chevron-down"></i>
  </button>
</div>

<!-- Notification component is now in base.html -->
<div id="notification" class="notification"></div>
<!-- Footer is now in base.html -->

<!-- API Key Add Modal -->
<div id="apiKeyModal" class="modal">
  <div
    class="w-full max-w-lg mx-auto rounded-2xl shadow-2xl overflow-hidden animate-fade-in"
    style="
      background-color: rgba(255, 255, 255, 0.98);
      color: #374151;
      border: 1px solid rgba(0, 0, 0, 0.12);
    "
  >
    <div class="p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-800">鎵归噺娣诲姞 API 瀵嗛挜</h2>
        <button
          id="closeApiKeyModalBtn"
          class="text-gray-300 hover:text-gray-800 text-xl"
        >
          &times;
        </button>
      </div>
      <p class="text-gray-300 mb-4">
        姣忚绮樿创涓€涓垨澶氫釜瀵嗛挜锛屽皢鑷姩鎻愬彇鏈夋晥瀵嗛挜骞跺幓閲嶃€?
      </p>
      <textarea
        id="apiKeyBulkInput"
        rows="10"
        placeholder="鍦ㄦ澶勭矘璐?API 瀵嗛挜..."
        class="w-full px-4 py-3 rounded-lg font-mono text-sm form-input-themed"
      ></textarea>
      <div class="flex justify-end gap-3 mt-6">
        <button
          type="button"
          id="confirmAddApiKeyBtn"
          class="bg-violet-600 hover:bg-violet-700 text-white px-6 py-2 rounded-lg font-medium transition"
        >
          纭娣诲姞
        </button>
        <button
          type="button"
          id="cancelAddApiKeyBtn"
          class="bg-gray-500 bg-opacity-50 hover:bg-opacity-70 text-gray-200 px-6 py-2 rounded-lg font-medium transition"
        >
          鍙栨秷
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Bulk Delete API Key Modal -->
<div id="bulkDeleteApiKeyModal" class="modal">
  <div
    class="w-full max-w-lg mx-auto rounded-2xl shadow-2xl overflow-hidden animate-fade-in"
    style="
      background-color: rgba(255, 255, 255, 0.98);
      color: #374151;
      border: 1px solid rgba(0, 0, 0, 0.12);
    "
  >
    <div class="p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-800">鎵归噺鍒犻櫎 API 瀵嗛挜</h2>
        <button
          id="closeBulkDeleteModalBtn"
          class="text-gray-300 hover:text-gray-800 text-xl"
        >
          &times;
        </button>
      </div>
      <p class="text-gray-300 mb-4">
        姣忚绮樿创涓€涓垨澶氫釜瀵嗛挜锛屽皢鑷姩鎻愬彇鏈夋晥瀵嗛挜骞朵粠鍒楄〃涓垹闄ゃ€?
      </p>
      <textarea
        id="bulkDeleteApiKeyInput"
        rows="10"
        placeholder="鍦ㄦ澶勭矘璐磋鍒犻櫎鐨?API 瀵嗛挜..."
        class="w-full px-4 py-3 rounded-lg font-mono text-sm form-input-themed"
      ></textarea>
      <div class="flex justify-end gap-3 mt-6">
        <button
          type="button"
          id="confirmBulkDeleteApiKeyBtn"
          class="bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium transition"
        >
          纭鍒犻櫎
        </button>
        <button
          type="button"
          id="cancelBulkDeleteApiKeyBtn"
          class="bg-gray-500 bg-opacity-50 hover:bg-opacity-70 text-gray-200 px-6 py-2 rounded-lg font-medium transition"
        >
          鍙栨秷
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Proxy Add Modal -->
<div id="proxyModal" class="modal">
  <div
    class="w-full max-w-lg mx-auto rounded-2xl shadow-2xl overflow-hidden animate-fade-in"
    style="
      background-color: rgba(255, 255, 255, 0.98);
      color: #374151;
      border: 1px solid rgba(0, 0, 0, 0.12);
    "
  >
    <div class="p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-800">鎵归噺娣诲姞浠ｇ悊鏈嶅姟鍣?/h2>
        <button
          id="closeProxyModalBtn"
          class="text-gray-300 hover:text-gray-800 text-xl"
        >
          &times;
        </button>
      </div>
      <p class="text-gray-300 mb-4">
        姣忚绮樿创涓€涓垨澶氫釜浠ｇ悊鍦板潃锛屽皢鑷姩鎻愬彇鏈夋晥鍦板潃骞跺幓閲嶃€?
      </p>
      <textarea
        id="proxyBulkInput"
        rows="10"
        placeholder="鍦ㄦ澶勭矘璐翠唬鐞嗗湴鍧€ (渚嬪 http://user:pass@host:port 鎴?socks5://host:port)..."
        class="w-full px-4 py-3 rounded-lg font-mono text-sm form-input-themed"
      ></textarea>
      <div class="flex justify-end gap-3 mt-6">
        <button
          type="button"
          id="confirmAddProxyBtn"
          class="bg-violet-600 hover:bg-violet-700 text-white px-6 py-2 rounded-lg font-medium transition"
        >
          纭娣诲姞
        </button>
        <button
          type="button"
          id="cancelAddProxyBtn"
          class="bg-gray-500 bg-opacity-50 hover:bg-opacity-70 text-gray-200 px-6 py-2 rounded-lg font-medium transition"
        >
          鍙栨秷
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Bulk Delete Proxy Modal -->
<div id="bulkDeleteProxyModal" class="modal">
  <div
    class="w-full max-w-lg mx-auto rounded-2xl shadow-2xl overflow-hidden animate-fade-in"
    style="
      background-color: rgba(255, 255, 255, 0.98);
      color: #374151;
      border: 1px solid rgba(0, 0, 0, 0.12);
    "
  >
    <div class="p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-800">鎵归噺鍒犻櫎浠ｇ悊鏈嶅姟鍣?/h2>
        <button
          id="closeBulkDeleteProxyModalBtn"
          class="text-gray-300 hover:text-gray-800 text-xl"
        >
          &times;
        </button>
      </div>
      <p class="text-gray-300 mb-4">
        姣忚绮樿创涓€涓垨澶氫釜浠ｇ悊鍦板潃锛屽皢鑷姩鎻愬彇鏈夋晥鍦板潃骞朵粠鍒楄〃涓垹闄ゃ€?
      </p>
      <textarea
        id="bulkDeleteProxyInput"
        rows="10"
        placeholder="鍦ㄦ澶勭矘璐磋鍒犻櫎鐨勪唬鐞嗗湴鍧€..."
        class="w-full px-4 py-3 rounded-lg font-mono text-sm form-input-themed"
      ></textarea>
      <div class="flex justify-end gap-3 mt-6">
        <button
          type="button"
          id="confirmBulkDeleteProxyBtn"
          class="bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium transition"
        >
          纭鍒犻櫎
        </button>
        <button
          type="button"
          id="cancelBulkDeleteProxyBtn"
          class="bg-gray-500 bg-opacity-50 hover:bg-opacity-70 text-gray-200 px-6 py-2 rounded-lg font-medium transition"
        >
          鍙栨秷
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Reset Confirmation Modal -->
<div id="resetConfirmModal" class="modal">
  <div
    class="w-full max-w-md mx-auto rounded-2xl shadow-2xl overflow-hidden animate-fade-in"
    style="
      background-color: rgba(255, 255, 255, 0.98);
      color: #374151;
      border: 1px solid rgba(0, 0, 0, 0.12);
    "
  >
    <div class="p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-800">纭閲嶇疆閰嶇疆</h2>
        <button
          id="closeResetModalBtn"
          class="text-gray-300 hover:text-gray-800 text-xl"
        >
          &times;
        </button>
      </div>
      <p class="text-gray-300 mb-6">
        纭畾瑕侀噸缃墍鏈夐厤缃悧锛?br />杩欏皢鎭㈠鍒伴粯璁ゅ€硷紝姝ゆ搷浣滀笉鍙挙閿€銆?
      </p>
      <div class="flex justify-end gap-3">
        <button
          type="button"
          id="confirmResetBtn"
          class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg font-medium transition"
        >
          纭閲嶇疆
        </button>
        <button
          type="button"
          id="cancelResetBtn"
          class="bg-violet-600 hover:bg-violet-700 text-white px-6 py-2 rounded-lg font-medium transition"
        >
          鍙栨秷
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Vertex Express API Key Add Modal -->
<div id="vertexApiKeyModal" class="modal">
  <div
    class="w-full max-w-lg mx-auto rounded-2xl shadow-2xl overflow-hidden animate-fade-in"
    style="
      background-color: rgba(255, 255, 255, 0.98);
      color: #374151;
      border: 1px solid rgba(0, 0, 0, 0.12);
    "
  >
    <div class="p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-800">
          鎵归噺娣诲姞 Vertex Express API 瀵嗛挜
        </h2>
        <button
          id="closeVertexApiKeyModalBtn"
          class="text-gray-300 hover:text-gray-800 text-xl"
        >
          &times;
        </button>
      </div>
      <p class="text-gray-300 mb-4">
        姣忚绮樿创涓€涓垨澶氫釜瀵嗛挜锛屽皢鑷姩鎻愬彇鏈夋晥瀵嗛挜 (鏍煎紡: AQ.寮€澶达紝鍏?3浣?
        骞跺幓閲嶃€?
      </p>
      <textarea
        id="vertexApiKeyBulkInput"
        rows="10"
        placeholder="鍦ㄦ澶勭矘璐?Vertex Express API 瀵嗛挜..."
        class="w-full px-4 py-3 rounded-lg font-mono text-sm form-input-themed"
      ></textarea>
      <div class="flex justify-end gap-3 mt-6">
        <button
          type="button"
          id="confirmAddVertexApiKeyBtn"
          class="bg-violet-600 hover:bg-violet-700 text-white px-6 py-2 rounded-lg font-medium transition"
        >
          纭娣诲姞
        </button>
        <button
          type="button"
          id="cancelAddVertexApiKeyBtn"
          class="bg-gray-500 bg-opacity-50 hover:bg-opacity-70 text-gray-200 px-6 py-2 rounded-lg font-medium transition"
        >
          鍙栨秷
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Bulk Delete Vertex Express API Key Modal -->
<div id="bulkDeleteVertexApiKeyModal" class="modal">
  <div
    class="w-full max-w-lg mx-auto rounded-2xl shadow-2xl overflow-hidden animate-fade-in"
    style="
      background-color: rgba(255, 255, 255, 0.98);
      color: #374151;
      border: 1px solid rgba(0, 0, 0, 0.12);
    "
  >
    <div class="p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-800">
          鎵归噺鍒犻櫎 Vertex Express API 瀵嗛挜
        </h2>
        <button
          id="closeBulkDeleteVertexModalBtn"
          class="text-gray-300 hover:text-gray-800 text-xl"
        >
          &times;
        </button>
      </div>
      <p class="text-gray-300 mb-4">
        姣忚绮樿创涓€涓垨澶氫釜瀵嗛挜锛屽皢鑷姩鎻愬彇鏈夋晥瀵嗛挜骞朵粠鍒楄〃涓垹闄ゃ€?
      </p>
      <textarea
        id="bulkDeleteVertexApiKeyInput"
        rows="10"
        placeholder="鍦ㄦ澶勭矘璐磋鍒犻櫎鐨?Vertex Express API 瀵嗛挜..."
        class="w-full px-4 py-3 rounded-lg font-mono text-sm form-input-themed"
      ></textarea>
      <div class="flex justify-end gap-3 mt-6">
        <button
          type="button"
          id="confirmBulkDeleteVertexApiKeyBtn"
          class="bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium transition"
        >
          纭鍒犻櫎
        </button>
        <button
          type="button"
          id="cancelBulkDeleteVertexApiKeyBtn"
          class="bg-gray-500 bg-opacity-50 hover:bg-opacity-70 text-gray-200 px-6 py-2 rounded-lg font-medium transition"
        >
          鍙栨秷
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Proxy Check Results Modal -->
<div id="proxyCheckModal" class="modal">
  <div
    class="w-full max-w-4xl mx-auto rounded-2xl shadow-2xl overflow-hidden animate-fade-in"
    style="
      background-color: rgba(255, 255, 255, 0.98);
      color: #374151;
      border: 1px solid rgba(0, 0, 0, 0.12);
    "
  >
    <div class="p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-bold text-gray-800">浠ｇ悊妫€娴嬬粨鏋?/h2>
        <button
          id="closeProxyCheckModalBtn"
          class="text-gray-300 hover:text-gray-800 text-xl"
        >
          &times;
        </button>
      </div>
      
      <!-- 妫€娴嬬姸鎬佸拰杩涘害 -->
      <div id="proxyCheckProgress" class="mb-4 hidden">
        <div class="flex items-center gap-2 mb-2">
          <div class="w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
          <span class="text-sm text-gray-600">妫€娴嬩腑...</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2">
          <div id="progressBar" class="bg-blue-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
        </div>
        <div class="text-xs text-gray-500 mt-1">
          <span id="progressText">鍑嗗寮€濮嬫娴?..</span>
        </div>
      </div>
      
      <!-- 妫€娴嬬粨鏋滄瑙?-->
      <div id="proxyCheckSummary" class="mb-4 hidden">
        <div class="grid grid-cols-3 gap-4 text-center">
          <div class="bg-green-50 border border-green-200 rounded-lg p-3">
            <div class="text-2xl font-bold text-green-600" id="availableCount">0</div>
            <div class="text-sm text-green-700">鍙敤</div>
          </div>
          <div class="bg-red-50 border border-red-200 rounded-lg p-3">
            <div class="text-2xl font-bold text-red-600" id="unavailableCount">0</div>
            <div class="text-sm text-red-700">涓嶅彲鐢?/div>
          </div>
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
            <div class="text-2xl font-bold text-blue-600" id="totalCount">0</div>
            <div class="text-sm text-blue-700">鎬绘暟</div>
          </div>
        </div>
      </div>
      
      <!-- 妫€娴嬬粨鏋滃垪琛?-->
      <div id="proxyCheckResults" class="space-y-2" style="max-height: 400px; overflow-y: auto;">
        <!-- 妫€娴嬬粨鏋滃皢鍦ㄨ繖閲屽姩鎬佹坊鍔?-->
      </div>
      
      <div class="flex justify-end gap-3 mt-6">
        <button
          type="button"
          id="retryFailedProxiesBtn"
          class="bg-orange-600 hover:bg-orange-700 text-white px-6 py-2 rounded-lg font-medium transition hidden"
        >
          閲嶈瘯澶辫触鐨勪唬鐞?
        </button>
        <button
          type="button"
          id="closeProxyCheckBtn"
          class="bg-gray-500 bg-opacity-50 hover:bg-opacity-70 text-gray-200 px-6 py-2 rounded-lg font-medium transition"
        >
          鍏抽棴
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Model Helper Modal -->
<div id="modelHelperModal" class="modal">
  <div
    class="w-full max-w-lg mx-auto rounded-2xl shadow-2xl overflow-hidden animate-fade-in"
    style="
      background-color: rgba(255, 255, 255, 0.98);
      color: #374151;
      border: 1px solid rgba(0, 0, 0, 0.12);
    "
  >
    <div class="p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 id="modelHelperTitle" class="text-xl font-bold text-gray-800">
          閫夋嫨妯″瀷
        </h2>
        <button
          id="closeModelHelperModalBtn"
          class="text-gray-300 hover:text-gray-800 text-xl"
        >
          &times;
        </button>
      </div>
      <input
        type="text"
        id="modelHelperSearchInput"
        placeholder="鎼滅储妯″瀷..."
        class="w-full px-4 py-3 mb-4 rounded-lg font-mono text-sm form-input-themed"
      />
      <div
        id="modelHelperListContainer"
        class="array-container"
        style="max-height: 300px; overflow-y: auto"
      >
        <!-- Model items will be populated here -->
        <p class="text-gray-400 text-sm italic">姝ｅ湪鍔犺浇妯″瀷鍒楄〃...</p>
      </div>
      <div class="flex justify-end gap-3 mt-6">
        <button
          type="button"
          id="cancelModelHelperBtn"
          class="bg-gray-500 bg-opacity-50 hover:bg-opacity-70 text-gray-200 px-6 py-2 rounded-lg font-medium transition"
        >
          鍏抽棴
        </button>
      </div>
    </div>
  </div>
</div>

{% endblock %} {% block body_scripts %}
<script src="{{ static_url('js/config_editor.js') }}"></script>
<!-- 澧炲己涓嬫媺妗嗘牱寮忓拰浜や簰鎬?-->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // 澧炲己鎵€鏈変笅鎷夋鐨勪氦浜掓€?
    const selects = document.querySelectorAll(".form-select-themed");

    selects.forEach((select) => {
      // 娣诲姞閫夋嫨浜嬩欢鏉ュ簲鐢ㄩ€変腑鏁堟灉
      select.addEventListener("change", function () {
        this.classList.add("selected");
        // 璁剧疆寰皬鐨勫姩鐢绘晥鏋?
        this.style.transition = "all 0.2s ease";
        this.style.transform = "scale(1.02)";
        setTimeout(() => {
          this.style.transform = "scale(1)";
        }, 200);
      });

      // 娣诲姞鐒︾偣浜嬩欢
      select.addEventListener("focus", function () {
        this.style.boxShadow = "0 0 0 3px rgba(216, 180, 254, 0.5)";
      });

      // 鏍规嵁鏄惁鏈夐€変腑鍊兼坊鍔犻€変腑鏍峰紡
      if (select.value && select.value !== "") {
        select.classList.add("selected");
      }
    });

    // 缇庡寲鏃ュ織绾у埆閫夋嫨鐨勬樉绀?- 娴呰壊涓婚鐗堟湰
    const logLevelSelect = document.getElementById("LOG_LEVEL");
    if (logLevelSelect) {
      // 缁欎笉鍚屾棩蹇楃骇鍒坊鍔犵粺涓€鐨勬祬鑹蹭富棰樻牱寮?
      const updateLogLevelStyle = () => {
        const value = logLevelSelect.value;

        // 缁熶竴浣跨敤娴呰壊涓婚鏍峰紡锛岄€氳繃杞诲井鐨勮竟妗嗗彉鍖栨潵鍖哄垎绾у埆
        switch (value) {
          case "DEBUG":
            logLevelSelect.style.borderColor = "#3b82f6"; // blue-500 涓婚鑹?
            logLevelSelect.style.color = "#374151"; // gray-700 娣辩伆鏂囧瓧
            break;
          case "INFO":
            logLevelSelect.style.borderColor = "#3b82f6"; // blue-500 涓婚鑹?
            logLevelSelect.style.color = "#374151"; // gray-700 娣辩伆鏂囧瓧
            break;
          case "WARNING":
            logLevelSelect.style.borderColor = "#6b7280"; // gray-500 涓€х伆
            logLevelSelect.style.color = "#374151"; // gray-700 娣辩伆鏂囧瓧
            break;
          case "ERROR":
            logLevelSelect.style.borderColor = "#6b7280"; // gray-500 涓€х伆
            logLevelSelect.style.color = "#374151"; // gray-700 娣辩伆鏂囧瓧
            break;
          case "CRITICAL":
            logLevelSelect.style.borderColor = "#4b5563"; // gray-600 绋嶆繁鐏?
            logLevelSelect.style.color = "#374151"; // gray-700 娣辩伆鏂囧瓧
            break;
          default:
            logLevelSelect.style.borderColor = "rgba(0, 0, 0, 0.12)"; // 榛樿杈规
            logLevelSelect.style.color = "#374151"; // gray-700 娣辩伆鏂囧瓧
        }
      };

      // 鍒濆鍖栧拰鍙樻洿鏃舵洿鏂版牱寮?
      updateLogLevelStyle();
      logLevelSelect.addEventListener("change", updateLogLevelStyle);
    }

    // 澧炲己棰勭畻鏄犲皠椤逛氦浜?
    const budgetInputs = document.querySelectorAll(".map-value-input");
    budgetInputs.forEach((input) => {
      // 娣诲姞鐒︾偣鍜屾偓鍋滄晥鏋?
      input.addEventListener("focus", function () {
        const parentItem = this.closest(".map-item");
        if (parentItem) {
          parentItem.style.backgroundColor =
            "rgba(243, 244, 246, 1)"; /* gray-100 */
          parentItem.style.borderColor =
            "rgba(59, 130, 246, 0.5)"; /* blue-500 */
        }
      });

      input.addEventListener("blur", function () {
        const parentItem = this.closest(".map-item");
        if (parentItem) {
          parentItem.style.backgroundColor = "";
          parentItem.style.borderColor = "";
        }
      });

      // 杈撳叆闄愬埗涓烘鏁存暟涓斾笉瓒呰繃鏈€澶у€?
      input.addEventListener("input", function () {
        let val = this.value.replace(/[^0-9]/g, "");
        if (val !== "") {
          val = parseInt(val, 10);
          if (val > 32767) val = 32767;
        }
        this.value = val;

        // 娣诲姞寰皬鍔ㄧ敾鍙嶉
        this.style.transform = "scale(1.05)";
        setTimeout(() => {
          this.style.transform = "scale(1)";
        }, 150);
      });
    });
  });
</script>
{% endblock %}

